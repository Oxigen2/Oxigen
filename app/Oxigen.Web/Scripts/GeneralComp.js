var opera = (navigator.appName.indexOf("Opera") != -1) ? true : false; var firefox = navigator.userAgent.toLowerCase(); firefox = (firefox.indexOf("firefox") != -1) ? true : false; var safari = navigator.userAgent.toLowerCase(); safari = (safari.indexOf("safari") != -1) ? true : false; var chrome = navigator.userAgent.toLowerCase(); chrome = (chrome.indexOf("chrome") != -1) ? true : false; var msie_only = (navigator.appName.indexOf("Microsoft") != -1) ? true : false; var msie_old = false; var msie_80 = false; var msie_70 = false; var msie_60 = false; var msie_55 = false; if (msie_only) { fullVerStr = navigator.appVersion; verStr = fullVerStr.substring(fullVerStr.indexOf("MSIE") + 4, fullVerStr.length); verStr = verStr.substring(0, verStr.indexOf(";")); msie_old = (parseFloat(verStr) < 7) ? true : false; msie_80 = (parseFloat(verStr) >= 8) ? true : false; msie_70 = (parseFloat(verStr) == 7) ? true : false; msie_60 = (parseFloat(verStr) == 6) ? true : false; msie_55 = (parseFloat(verStr) == 5.5) ? true : false } document.writeln('<style type="text/css">\n/*<![CDATA[*/\n'); document.writeln(".WindowsTree .WindowsTreeContent {overflow-y:auto; overflow-x:hidden}\n"); if (msie_80) { document.writeln("body {overflow-y:scroll}\n"); document.writeln("select {padding-bottom:3px}\n"); document.writeln(".Radio, .CheckBox {margin-left:4px; margin-right:2px;}\n") } if (msie_70) { document.writeln(".BeneathInput2 input {top:-1px;}\n"); document.writeln(".RbVerticalList label {top:1px; left:-7px}\n"); document.writeln(".RbVerticalList input {left:-7px;}\n") } if (msie_old) { document.writeln("#ForJSCentreDiv         {filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/Images/Default/centre-div-bg.png', sizingMethod='scale');}\n"); document.writeln("#ForJSMonitor         {filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/Images/Default/monitor-frame.png', sizingMethod='scale');}\n"); document.writeln("#ForJSButtonRedCentre    {filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/Images/Default/centre-button-red.png', sizingMethod='scale');}\n"); document.writeln("#ForJSButtonGreenCentre    {filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/Images/Default/centre-button-green.png', sizingMethod='scale');}\n"); document.writeln("#ForJSButtonGreen1    {filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/Images/Default/button-green-large.png', sizingMethod='scale');}\n"); document.writeln("#ForJSButtonGreen2    {filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/Images/Default/button-green-large.png', sizingMethod='scale');}\n"); document.writeln("#ForJSButton1         {filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/Images/Default/button-big.png', sizingMethod='scale');}\n"); document.writeln("#ForJSButton2         {filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/Images/Default/button-big.png', sizingMethod='scale');}\n"); document.writeln("#ForJSButton3         {filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/Images/Default/button-bigger.png', sizingMethod='scale');}\n"); document.writeln("#ForJSButtonSmall         {filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src='/Images/Default/button-small.png', sizingMethod='scale');}\n"); document.writeln(".ContentDiv {height:451px;}\n"); document.writeln(".RbHorizontalList input {left:-7px;}\n"); document.writeln(".RbHorizontalList label {left:-7px;}\n"); document.writeln(".RbVerticalList label {top:1px; left:-7px}\n"); document.writeln(".RbVerticalList input {left:-7px;}\n") } if (msie_only) { document.writeln(".RbVerticalList {left:-6px; top:-2px;}\n"); document.writeln(".RbVerticalList input {position:relative; top:3px}\n"); document.writeln(".CbVerticalList {left:-6px; top:-2px;}\n"); document.writeln(".CbVerticalList input {position:relative; top:3px}\n") } if (opera) { document.writeln(".Radio, .CheckBox {margin-left:3px; margin-right:2px;}\n"); document.writeln(".RbHorizontalList input {}\n"); document.writeln(".RbHorizontalList label {top:0px;}\n"); document.writeln(".RbVerticalList {left:-1px;}\n"); document.writeln(".RbVerticalList input {margin-top:2px; margin-bottom:3px;}\n"); document.writeln(".CbVerticalList {left:-1px;}\n"); document.writeln(".CbVerticalList input {margin-top:2px; margin-bottom:3px;}\n") } if (firefox) { document.writeln(".Radio, .CheckBox {margin:4px; margin-right:3px; top:2px;}\n"); document.writeln(".RbHorizontalList label {top:-3px;}\n"); document.writeln(".RbVerticalList input {margin-top:4px; margin-bottom:3px;}\n"); document.writeln(".RbVerticalList label {position:relative; top:-3px; margin-left:6px;}\n"); document.writeln(".CbVerticalList input {margin-top:4px; margin-bottom:3px;}\n"); document.writeln(".CbVerticalList label {position:relative; top:-3px; margin-left:6px;}\n") } if (safari) { document.writeln(".Radio, .CheckBox {margin:4px; top:0px;}\n"); document.writeln(".RbVerticalList input {margin-top:4px; margin-bottom:3px;}\n"); document.writeln(".RbVerticalList label {top:-3px; margin-left:7px;}\n"); document.writeln(".CbVerticalList input {margin-top:4px; margin-bottom:3px;}\n"); document.writeln(".CbVerticalList label {margin-left:7px;}\n") } if (chrome) { document.writeln("body {overflow-y:scroll}\n"); document.writeln(".RbVerticalList input {margin-top:4px; margin-bottom:3px;}\n"); document.writeln(".RbVerticalList label {top:-3px; margin-left:7px;}\n"); document.writeln(".CbVerticalList input {margin-top:4px; margin-bottom:3px;}\n"); document.writeln(".CbVerticalList label {position:relative; top:-2px; margin-left:7px;}\n"); document.writeln(".AccessCBList label {top:-2px;}\n") } document.writeln("/*]]>*/\n</style>\n"); function CorrectPngForIE6(b) { if (msie_old) { var a; if (document.getElementById(b).nodeName.toLowerCase() == "img") { a = document.getElementById(b) } else { a = document.getElementById(b).getElementsByTagName("img")[0] } a.src = "/images/spacer.gif" } } var cookie_site = "Oxigen"; function toCookie(a, b) { var d = new Date(); d.setTime(d.getTime() + (1000 * 60 * 60 * 24 * 365)); var c = cookie_site + "_" + a + "=" + b; var e = "expires=" + d.toGMTString(); document.cookie = c + ";" + e + "; path=/" } function toCookie2(a, b, f) { var d = new Date(); d.setTime(d.getTime() + (f * 1000)); var c = cookie_site + "_" + a + "=" + b; var e = "expires=" + d.toGMTString(); document.cookie = c + ";" + e + "; path=/" } function fromCookie(b) { var a = cookie_site + "_" + b; var h = a.length; var d = document.cookie; var f = d.length; var e = 0; var g; while (e < f) { var c = e + h; if (d.substring(e, c) == a) { g = d.indexOf(";", c); if (g == -1) { g = d.length } return unescape(d.substring(c + 1, g)) } e++ } return "-1" } function checkLength(b, c, e) { var a = b.value.length; var d = e - a; if (d < 0) { d = 0 } if (a == 0) { document.getElementById(c).innerHTML = "Maximum text length is " + e + " characters." } if ((a > 0) && (a <= e)) { document.getElementById(c).innerHTML = "You may enter " + d + " more characters." } if (a > e) { b.value = b.value.substr(0, e); document.getElementById(c).innerHTML = "You may enter " + d + " more characters." } } function initLengthInfo(a, b, c) { if (document.getElementById(a)) { element_ref = document.getElementById(a).getElementsByTagName("textarea")[0]; checkLength(element_ref, b, c) } } function clearSearchField(c) { var a = c.previousSibling; a = a.previousSibling; var b = a.value; if (b == c.value) { c.value = "" } } function fillSearchField(b) { var a = b.previousSibling; a = a.previousSibling; var c = a.value; if (b.value == "") { b.value = c } } function divAlertPopUp() { var a = $("body").width(); if (a < 998) { a = 998 } var b = parseInt(a / 2) - 176; $("div.DivPopUp").css("z-index", "100"); $("div.DivPopUpAlert").css("left", b).slideDown(300); $(window).resize(function() { var c = $("body").width(); if (c < 998) { c = 998 } var d = parseInt(c / 2) - 176; $("div.DivPopUpAlert").css({ left: d }) }) } function divAlertPopUp2() { var a = $("body").width(); if (a < 998) { a = 998 } var b = parseInt(a / 2) - 176; $("div.DivPopUp").css("z-index", "100"); $("div.DivPopUpAlert2").css("left", b).slideDown(300); $(window).resize(function() { var c = $("body").width(); if (c < 998) { c = 998 } var d = parseInt(c / 2) - 176; $("div.DivPopUpAlert2").css({ left: d }) }) } var button_clicked = 0; var uploader_ready = 0; function UploaderBlackOut(b) { var d = new Date().getTime(); $.get("get.ox?command=getUserQuota&" + d, function(h) { var g = new Array(); g = h.split(",,"); $("#DivPopUpUploader input:eq(0)").val(g[0]); $("#DivPopUpUploader input:eq(1)").val(g[1]); $("#DivPopUpUploader input:eq(2)").val(g[2]); $("#spanTotalFileSize").html(bytesConverter(g[0])); $("#spanTotalAvailableBytes").html(bytesConverter(g[2])); var f = unformatFileSize(document.getElementById("spanTotalFileSize").innerHTML); document.getElementById("spanTotalFileSize").innerHTML = formatFileSize(parseInt($("#DivPopUpUploader input:eq(0)").val()) + parseInt(imageUploader1.getTotalFileSize())); imgWidth = (parseInt($("#DivPopUpUploader input:eq(0)").val()) / (parseInt($("#BytesTotal input").val()))) * 216; imgWidth2 = (parseInt($("#DivPopUpUploader input:eq(0)").val()) / (parseInt($("#BytesTotal input").val()))) * 216; document.getElementById("imgTotalFileSize").style.width = Math.round(imgWidth) + "px"; document.getElementById("imgTotalFileSizeUsed").style.width = Math.round(imgWidth2) + "px"; document.getElementById("spanMaxTotalFileSize").innerHTML = formatFileSize(parseInt($("#DivPopUpUploader input:eq(1)").val())) }); if (uploader_ready == 1) { var a = $("body").width(); if (a < 998) { a = 998 } var e = $(document).height(); var c = parseInt(a / 2) - 485; if (msie_old) { $("select").css({ visibility: "hidden" }) } $("div#CoverLayer").stop(true, true).css({ width: a, height: e, opacity: 0.7, display: "block" }); $("div#" + b).css({ left: c, zIndex: "10000", display: "block", width: "970px", height: "700px" }); $(window).resize(function() { var f = $("body").width(); if (f < 998) { f = 998 } var h = $(document).height(); var g = parseInt(f / 2) - 485; $("div#CoverLayer").stop(true, true).css({ width: f, height: h }); $("div#" + b).css({ left: g }) }); $(window).scroll(function() { var f = $("body").width(); if (f < 998) { f = 998 } var h = $(document).height(); var g = parseInt(f / 2) - 485; $("div#CoverLayer").stop(true, true).css({ width: f, height: h }); $("div#" + b).css({ left: g }) }) } else { $(".UploadContentCover").css("display", "block"); button_clicked = 1 } } function unUploaderBlackOut(a) { var b = 498; var c = $("body").height() / 2; var d = $("#DivPopUpUploader #UploadUserFolder option").index($("#DivPopUpUploader #UploadUserFolder option:selected")); $("#DivPopUpUploader").css({ width: "1px", height: "1px" }); $("div#CoverLayer").animate({ opacity: "0" }, 200, function() { $("div#CoverLayer").css("display", "none"); endProgressBar("ProgressBackHolder") }); if ($(a).is(".DivPopUpClose")) { } else { force_var = "Panel2,0" } } function unBlackOut3(b) { var c = 498; var d = $("body").height() / 2; var a = $(b).closest("div.DivPopUp"); $(b).closest("div.DivPopUp").slideUp(300); $("div#CoverLayer").animate({ opacity: "0" }, 200, function() { $("div#CoverLayer").css("display", "none") }); if (a.is("#DivLoginBox") && logged_in != 1 && window.location.href.indexOf("CreateWizard.aspx") != -1) { window.location = "Home.aspx" } } function BlackOut2(b) { $(".OxiValidation").css("display", "none"); $(".IsChanged").html(""); $(".ValidateField").removeClass("ValidateField"); $("#" + b).css("display", "block"); $("#LogEmailInput input").focus(); $("#LogEmailInput input").closest(".RFormBox").addClass("RSelectedFormBox"); $("#LogEmailInput input").addClass("RSelectedInput"); var a = $("body").width(); if (a < 998) { a = 998 } var d = $(document).height(); var c = parseInt(a / 2) - 257; if ($("#" + b).is(".DivPopUpMedium")) { var c = parseInt(a / 2) - 297 } if (msie_old) { $("select").css({ visibility: "hidden" }) } $("div#CoverLayer").stop(true, true).css({ width: a, height: d, opacity: 0.7, display: "block" }); $("div#" + b).css({ left: c, zIndex: "10000", display: "block" }); $(window).resize(function() { var e = $("body").width(); if (e < 998) { e = 998 } var g = $(document).height(); var f = parseInt(e / 2) - 257; $("div#CoverLayer").stop(true, true).css({ width: e, height: g }); $("div#" + b).css({ left: f }) }) } function BlackOut(b) { $(".OxiValidation").css("display", "none"); var a = $("body").width(); if (a < 998) { a = 998 } var d = $(document).height(); if ($("div#" + b).is("div.DivPopUpSmall")) { var c = parseInt(a / 2) - 257 } else { if ($("div#" + b).is("div.DivPopUpLarge")) { var c = parseInt(a / 2) - 485 } else { if ($("div#" + b).is("div.DivPopUpMedium")) { var c = parseInt(a / 2) - 297 } else { var c = parseInt(a / 2) - 417 } } } if (msie_old) { $("select").css({ visibility: "hidden" }) } $("div#CoverLayer").stop(true, true).css({ width: a, height: d, display: "block", opacity: "0.7" }); $("div#" + b + ":not(div.MainDiv div#" + b + "):eq(0)").remove(); $("div#" + b).clone(true, true).prependTo("body").css({ left: c, zIndex: "10000" }).fadeIn(250, function() { if ($("div#" + b).find(".WindowsFolder").length > 0) { } }); $(window).resize(function() { var e = $("body").width(); if (e < 998) { e = 998 } var g = $(document).height(); if ($("div#" + b).is("div.DivPopUpSmall")) { var f = parseInt(e / 2) - 257 } else { var f = parseInt(e / 2) - 417 } $("div#CoverLayer").stop(true, true).css({ width: e, height: g }); $("div#" + b).css({ left: f }) }); $(window).scroll(function() { var e = $("body").width(); if (e < 998) { e = 998 } var g = $(document).height(); if ($("div#" + b).is("div.DivPopUpSmall")) { var f = parseInt(e / 2) - 257 } else { var f = parseInt(e / 2) - 417 } $("div#CoverLayer").stop(true, true).css({ width: e, height: g }); $("div#" + b).css({ left: f }) }) } function unBlackOut(a) { var b = 498; var c = $("body").height() / 2; $(a).closest("div.DivPopUp").slideUp(300, function() { $("div#CoverLayer").animate({ opacity: "0" }, 50, function() { $("div#CoverLayer").css("display", "none"); $(a).closest("div.DivPopUp").remove() }) }) } function unBlackOut2() { var b = 498; var c = $("body").height() / 2; var a = $("div.DivPopUp:not(#DivPopUpUploader):visible"); a.slideUp("300", function() { $("div#CoverLayer").animate({ opacity: "0" }, 50, function() { $("div#CoverLayer").css("display", "none"); a.remove(); if (a.is("#DivLoginBox") && logged_in != 1 && window.location.href.indexOf("CreateWizard.aspx") != -1) { window.location = "Home.aspx" } }) }) } function unBlackOut2v2() { var a = $("div.DivPopUp:not(#DivPopUpUploader):visible"); a.slideUp(300); $("div#CoverLayer").animate({ opacity: "0" }, 200, function() { $("div#CoverLayer").css("display", "none") }) } function miniNavShow(a) { $(".MiniNavigation div").removeClass("Active").addClass("Inactive"); $(".MiniNavigation div:eq(" + a + ")").removeClass("Inactive").addClass("Active"); $(".MiniNavDivs").css("display", "none"); $(".MiniNavDivs:eq(" + a + ")").css("display", "block"); initPager("LeftColumn"); if ($("div.MiniNavigation .Active a").html() == "Browse") { var b = $("div.LeftColumn .MiniNavDivs:eq(0)") } else { var b = $("div.LeftColumn .MiniNavDivs:eq(1)") } b.find(".StreamView").css("display", "none"); b.find(".StreamView:eq(0)").css({ display: "block", left: "14px" }) } function removeFromPanel(a) { $("." + a + " .SelectedStream").remove(); checkCentreColumn() } function removeFromPanel2(a) { $("." + a + " .SelectedStream").remove(); checkCentreColumn2() } var content_length; function streamBrowseView() { $("div.StreamHolder").each(function() { $(this).find("img:eq(0)").css("display", "block") }); $("div.RightColumn div#PersonalStream").click(function() { BlackOut("DivPopUpPersonal") }); $("#CentreColumn div.StreamHolder div.StreamWeight").css("display", "none") } function sendPasswordRequest() { var a = $("#ForJSPasswordRequest"); var d = $("#JSRequestName input").val(); var c = $("#JSRequestEmail input").val(); var f = $("#JSRequestMessage textarea").val(); var g = $("#Unlocking span.MetaKey").html(); var b = a.find(".CaptchaBox input").val(); var e = "sendRequest,," + g + ",," + d + ",," + c + ",," + f + ",," + b; $.post(ajax_path_put, { command: e }, function(h) { if (h == -2) { $("#DivPopUpPrivate .OxiValidation").html("Please supply your name.").slideDown(300) } if (h == -1) { $("#DivPopUpPrivate .OxiValidation").html("Incorrect captcha entry. Please try again.").slideDown(300) } else { if (h == 0) { $("#DivPopUpPrivate .OxiValidation").html("Please enter a valid email address.").slideDown(300) } else { if (h == 1) { checkCentreColumn(); globalClosePopUp() } } } }) } function downloadClickView(d) { var a; if ($("div#CentreColumn div.StreamHolder").length > 0) { $("div#CentreColumn div.StreamHolder").remove(); $("div.SelectedStream").removeClass("SelectedStream"); $(d).addClass("SelectedStream").clone().prependTo("div#CentreColumn div.CentreContent").css("display", "block") } else { $("div#CentreColumn div.StreamHolder").remove(); $("div.SelectedStream").removeClass("SelectedStream"); $(d).addClass("SelectedStream").clone().prependTo("div#CentreColumn div.CentreContent").slideDown(500) } $("#CentreColumn .CentreContent").css({ display: "block", visibility: "visible", opacity: "1" }); var c = $("div#CentreColumn div.StreamHolder"); c.find("div.PrivateLock").parent().parent().css("opacity", "1"); if (msie_80) { c.find("div.PrivateLock").css("opacity", "1").parent().css("opacity", "1") } a = $(d).find("div.StreamMeta span.MetaWeight").html(); var b = $("div#CentreColumn div.CentreMeta"); var e = b.find("div.WeightingSliderInner"); var f = b.find("div.StreamPrivateMessage"); if ($(d).find(".StreamMeta span.MetaPrivate").html() == 1) { f.slideDown(300); $(d).attr("id", "Unlocking"); $("#DivPopUpPrivate input,#DivPopUpPrivate textarea").removeAttr("value").empty(); if ($(d).find(".StreamMeta span.MetaRequest").html() == "1") { $("#ForJSPasswordRequest").css("display", "block") } else { $("#ForJSPasswordRequest").css("display", "none") } $("#UnlockHiddenID input").attr("value", $(d).find(".StreamMeta span.MetaKey").html()); $("#DivPopUpPrivate #JSRequestMessage textarea").html("Hi, I happened to stumble upon your stream called " + $(d).find("span:eq(0)").html() + ". Can you please provide me with the password to unlock it? Thanks!"); BlackOut("DivPopUpPrivate") } else { f.slideUp(300) } b.slideDown(500); e.slider("option", "value", a); e.find("div.ui-slider-horizontal div.ui-slider-handle").append('<div class="WeightLabel">Weighting:&nbsp;<span>' + e.slider("option", "value") + "</span></div>"); $("#MetaWeighting").html(e.slider("option", "value")); checkCentreColumn() } function unlockStream(c) { var d = $("#UnlockHiddenID input").attr("value"); var a = $("#PasswordCheck input").attr("value"); var b = "unlockStream,," + d + ",," + a; $.post(ajax_path_put, { command: b }, function(e) { if (e == 0) { $("#DivPopUpPrivate .OxiValidation").html("Incorrect password. Please try again.").slideDown(300) } if (e == 1) { $("#Unlocking span.MetaPrivate").html("-2"); $("#Unlocking").find(".PrivateLock").attr("class", "PrivateUnlock"); $("#Unlocking span.MetaKey").removeAttr("id"); dropDownAjax("DropDownPCs"); initPager("RightColumn"); listAjax($("#BrowseNav a.BrowseMain:last").attr("id")); checkCentreColumn(); globalClosePopUp() } }) } var centre_checked = 0; function checkCentreColumn() { $("#CentreColumn div.StreamHolder div.StreamWeight").css("display", "none"); var j = 500; var b = $("#CentreColumn div.CentreContent"); var e = b.find("div.StreamPrivateMessage"); var g = b.find("div.MetaDiv"); var c = b.find("div.WeightingSlider"); var a = b.find("div.WeightingSliderLabel"); var i = b.find("div.ButtonGreen"); var d = b.find("div.ButtonRed"); var f = b.find("div.AlreadyAdded"); right_column = $("#RightColumn"); left_column = $("#LeftColumn"); if (centre_checked == 0) { b.css({ opacity: "0" }); centre_checked = 1 } if ($("div.SelectedStream:not(div#CentreColumn div.SelectedStream)").parent().parent().parent().is("#LeftColumn")) { d.css("display", "none"); var h = ""; $("div.RightColumn div.StreamMeta span.MetaKey").each(function() { if ($(this).html() == b.find(".StreamMeta span.MetaKey").html()) { h = 1 } }); if (h != 1) { i.css("display", "block"); f.css("display", "none") } else { i.css("display", "none"); f.css("display", "block") } } else { i.css("display", "none"); d.css("display", "block"); f.css("display", "none") } if ($("div.LeftColumn div.SelectedStream").length > 0) { c.slideUp(j); a.slideUp(j); g.slideDown(j) } else { g.slideUp(j); c.slideDown(j); a.slideDown(j) } if (left_column.find("div.SelectedStream").length == 0 && right_column.find("div.SelectedStream").length == 0) { b.find(".StreamHolder").slideUp(j, function() { b.find(".StreamHolder").remove() }); b.stop(true, true).animate({ opacity: "0" }, 400); g.slideUp(j); c.slideUp(j); a.slideUp(j); i.slideUp(j); d.slideUp(j); f.slideUp(j); e.slideUp(j) } else { b.stop(true, true).animate({ opacity: "1" }, 400) } } function checkCentreColumn2() { var c = parseInt($("#SlidingPanelsInner").css("left")); if (c == 0) { var l = 0 } else { if (c == -515) { var l = 1 } else { var l = 2 } } var m = 500; var b = $("#Center" + l + " div.PanelCenterContent"); var i = b.find("div.MetaDiv"); var d = b.find("div.WeightingSlider"); var a = b.find("div.WeightingSliderLabel"); var k = b.find("div.ButtonGreen"); var f = b.find("div.ButtonRed"); var h = b.find("div.AlreadyAdded"); var g; var e; if (c == 0) { g = $("#Panel2"); e = $("#Panel1") } else { if (c == -515) { g = $("#Panel3"); e = $("#Panel2") } else { g = $("#Panel4"); e = $("#Panel3") } } if ($("div.SelectedStream").length != 0 && e.is(":not(#Panel1)")) { if ((e.is("#Panel2") || e.is("#Panel3")) && e.find("div.SelectedStream").length > 0) { k.css("display", "block"); f.css("display", "none") } else { f.css("display", "none"); var j = 0; g.find("div.StreamMeta span.MetaKey").each(function() { if ($(this).html() == b.find("div.StreamMeta span.MetaKey").html()) { j = 1 } }); if (j != 1) { k.css("display", "block"); h.css("display", "none") } else { k.css("display", "none"); h.css("display", "block") } } if (e.find("div.SelectedStream").length > 0) { d.slideUp(m); a.slideUp(m); i.slideDown(m) } else { i.slideUp(m); d.slideDown(m); a.slideDown(m) } if (e.find("div.SelectedStream").length == 0) { b.find("div.StreamHolder").slideUp(m, function() { b.find("div.StreamHolder").remove() }); if (l != 1) { b.stop(true, true).animate({ opacity: "0.3" }, 400) } i.slideUp(m); d.slideUp(m); a.slideUp(m); k.slideUp(m); f.slideUp(m); h.slideUp(m); $("div.SchedulingDiv").slideUp(m) } else { b.stop(true, true).animate({ opacity: "1" }, 400) } } $("#Center1 .PanelCenterContent").css({ display: "block", opacity: "1" }); $("#Center1 .PanelCenterContent div.TemplateChooser").css({ display: "block" }) } function streamBrowseView2() { $(".StreamHolder").each(function() { $(this).find("img:eq(0)").css("display", "block") }) } function streamClick2() { $(".OxiValidation").slideUp(200) } function multiClick2(d) { $("div.OxiValidation").slideUp(200); var a = "Panel2"; var e = $("div." + a + " div.SelectedStream").length; if (e == 0 && $(d).closest(".Panel").is("#" + a)) { $("#TemplateChooser").slideDown(500) } if ($(d).is(".SelectedStream")) { $(d).removeClass("SelectedStream") } else { $(d).addClass("SelectedStream") } e = $("#" + a + " div.SelectedStream").length; $("#StupeflixValidation span").html(e); if (e <= 15) { $("#TemplateButton").css("display", "block"); $("#StupeflixValidation").css("color", "#090"); $("#StupeflixValidation span").css("color", "#090") } else { if ($("#TemplateChooser option").index($("#TemplateChooser option:selected")) == 2) { $("#TemplateButton").css("display", "none") } $("#StupeflixValidation").css("color", "#C00"); $("#StupeflixValidation span").css("color", "#C00") } var c = parseInt($("#SlidingPanelsInner").css("left")); if (c == 0) { var f = 0 } else { if (c == -515) { var f = 1 } else { var f = 2 } } var b = f; if (e == 1) { if ($(d).is(".SelectedStream")) { $("#Center" + b + " .PanelCenterContent .StreamHolder").remove(); $(d).addClass("SelectedStream").clone().prependTo("#Center" + b + " .PanelCenterContent") } else { $("#Center" + b + " .PanelCenterContent .StreamHolder").remove(); $("div.Panel2 div.SelectedStream").clone().prependTo("#Center" + b + " .PanelCenterContent") } } else { $("#Center" + b + " .PanelCenterContent .StreamHolder").addClass("MultipleStream") } $("#Center" + b + " .CentreMeta div.MetaDiv").css("display", "none"); checkCentreColumn2() } var init_multi_sched_var = 0; function multiClick3(f) { $("div.OxiValidation").slideUp(200); var a = "Panel3"; var c = $("#" + a + " div.SelectedStream").length; if (c == 0) { $("div.SchedulingDiv").slideDown(500) } if ($(f).is("div.SelectedStream")) { $(f).removeClass("SelectedStream") } else { $(f).addClass("SelectedStream") } c = $("#" + a + " div.SelectedStream").length; var b = parseInt($("#SlidingPanelsInner").css("left")); if (b == 0) { var h = 0 } else { if (b == -515) { var h = 1 } else { var h = 2 } } var d = h; if (c == 0) { init_multi_sched_var = 0 } else { if (c == 1) { if ($(f).is(".SelectedStream")) { $("#Center" + d + " div.PanelCenterContent div.StreamHolder").remove(); $(f).addClass("SelectedStream").clone().prependTo("#Center" + d + " div.PanelCenterContent"); var j = $(f).find("div.StreamMeta span.MetaKey").html() } else { $("#Center" + d + " div.PanelCenterContent div.StreamHolder").remove(); $("#Panel3 div.SelectedStream").clone().prependTo("#Center" + d + " div.PanelCenterContent"); var j = $("#Panel3 div.SelectedStream").find("div.StreamMeta span.MetaKey").html() } var e = new Date().getTime(); var i = new Date(); var g = (i.getMonth() + 1); if (g < 10) { g = "0" + g } $.get(ajax_path_get + "?command=getSlideProperties&slideID=" + j + "&" + e, function(m) { var l = m; ajax_array = l.split("||"); var n = new Array; for (var k = 0; k < ajax_array.length; k++) { n[k] = ajax_array[k].split(",,") } $("#MultiSchedURL").val(n[0][4]); $("#MultiSchedDur").val(n[0][5]); if (init_multi_sched_var == 0) { $("#MultiSchedSD2 input").val(i.getDate() + "/" + g + "/" + i.getFullYear()); $("#MultiSchedED2 input").val(i.getDate() + "/" + g + "/" + (i.getFullYear() + 2)); $("#MultiSchedDays input").attr("checked", "checked"); init_multi_sched_var = 1 } }) } else { $("#Center" + d + " div.PanelCenterContent div.StreamHolder").addClass("MultipleStream"); $("#MultiSchedURL").val("[Slide URL]"); $("#MultiSchedDur").val("[Slide Duration]") } } checkCentreColumn2() } function templateChooser() { var a = "Panel2"; $("#TemplateChooser").change(function() { var d = $("div." + a + " div.SelectedStream").length; $("#StupeflixValidation span").html(d); if (d <= 15 && d > 4) { $("#TemplateButton").css("display", "block"); $("#StupeflixValidation").css("color", "#090"); $("#StupeflixValidation span").css("color", "#090") } else { if ($("#TemplateChooser option").index($("#TemplateChooser option:selected")) == 2) { $("#TemplateButton").css("display", "none") } else { $("#TemplateButton").css("display", "block") } $("#StupeflixValidation").css("color", "#C00"); $("#StupeflixValidation span").css("color", "#C00") } var b = $("div.TemplateChooser .HiddenSelection"); b.slideUp(300); var c = $("#TemplateChooser option").index($("#TemplateChooser option:selected")); b.eq(c).slideDown(300) }) } function chooseClickType(a) { if (window.location.href.indexOf("CreateWizard.aspx") == -1) { downloadClickView(a) } else { var b = $(a).closest("div.Panel"); if (whatpanel == 1 && b.is("#Panel2")) { multiClick2(a) } else { if (whatpanel == 2 && b.is("#Panel3")) { multiClick3(a) } } } } function convertContent() { var b = $("#TemplateChooser option").index($("#TemplateChooser option:selected")); if (b == 0) { var a = "templateConvert,," + $("#ForJQSlideDropDown option:selected").val() + ",," + b + ",," + $("#Template1Input1").val() + ",," + $("#Template1Input2").val() + ",," + $("#Template1Date1 input").val() + "||" } else { if (b == 1) { var a = "" } else { if (b == 2) { var a = "" } } } $("#Panel2 .SelectedStream").each(function() { a = a + $(this).find(".MetaKey").html() + ",," }); $.post(ajax_path_put, { command: a }, function(c) { }) } function imageCarousel() { if ($(".SelectedStream .StreamMeta span.MetaPrivate").html() != 1) { $(".CentreColumn .StreamHolder img").fadeOut(300); $(".CentreColumn .StreamHolder img:eq(" + preview_image + ")").fadeIn(300); if (preview_image == (content_length - 1)) { preview_image = 0 } else { preview_image++ } preview_timer = setTimeout("imageCarousel()", 2000) } } function initWeightSlider() { var a = ".SelectedStream:not(.CentreColumn .SelectedStream) .StreamWeight"; $(".WeightingSliderInner").slider({ value: 10, min: 1, max: 100, step: 1, start: function(b, c) { $(this).find(".WeightLabel").css("display", "block") }, slide: function(b, c) { $(this).find(".WeightLabel span").html(c.value); $("#MetaWeighting").html(c.value) }, stop: function(e, f) { $(".SelectedStream:not(.CentreColumn .SelectedStream) .StreamMeta span.MetaWeight").html(f.value); $(this).find(".WeightLabel").css("display", "none"); $(a).html(f.value); if (f.value == 100) { $(a).css({ fontSize: "1em", paddingTop: "3px", height: "18px", paddingLeft: "2px", width: "20px" }) } else { if (f.value < 10) { $(a).css({ fontSize: "1.4em", paddingTop: "1px", height: "20px", paddingLeft: "8px", width: "14px" }) } else { $(a).css({ fontSize: "1.4em", paddingTop: "1px", height: "20px", paddingLeft: "3px", width: "19px" }) } } var d = $("#DropDownPCs select option:selected").attr("value"); var b = $(".SelectedStream:not(.CentreColumn .SelectedStream) span.MetaKey").html(); var c = "channelWeighting,," + d + ",," + b + ",," + f.value; $.post(ajax_path_put, { command: c }, function(g) { }) } }); $(".ui-slider-horizontal .ui-slider-handle").append('<div class="WeightLabel">Weighting:&nbsp;<span>' + $(".WeightingSliderInner").slider("option", "value") + "</span></div>") } function initPersonal(a) { } function initPrivacy(a) { $("." + a + " .StreamMeta").each(function() { if ($(this).find("span.MetaPrivate").html() == 1) { $(this).parent().find(".StreamImages").prepend('<div class="PrivateLock"></div>') } if ($(this).find("span.MetaPrivate").html() == 2) { $(this).parent().find(".StreamImages").prepend('<div class="PrivateUnlock"></div>') } }); $(".RightColumn .StreamHolder").css("opacity", "1"); $(".RightColumn .StreamHolder .PrivateLock").parent().parent().css("opacity", "0.4"); if (msie_80) { $(".RightColumn .StreamHolder .PrivateUnlock").css("opacity", "1").parent().css("opacity", "1"); $(".RightColumn .StreamHolder .PrivateLock").css("opacity", "0.4").parent().css("opacity", "0.4") } } function cloneStream(c, i) { if ($("div.RightColumn .StreamView").length == 0 && i == "RightColumn") { $("div.RightColumn div.PanelInputFields").after('<div class="StreamView"></div>') } var f = $("#TemplateChooser option").index($("#TemplateChooser option:selected")); var d = $("div." + i); var g = d.find("div.StreamView:last"); var e = $("div." + c); var k = e.find("div.StreamView div.SelectedStream"); if (d.attr("class") == "Panel Panel3") { addContentAjax("ForJQSlideDropDown") } else { if (d.attr("class") == "Panel Panel4") { addContentAjax("ForJQStreamDropDown") } } if (f < 2 || d.attr("class") != "Panel Panel3") { if (i == "RightColumn") { var h = "2px" } else { var h = "14px" } var j = d.find(".StreamView:visible"); k.each(function() { if (g.find(".StreamHolder").length == 12) { g.after('<div class="StreamView"></div>'); g = d.find("div.StreamView:last"); g.css("display", "none"); initPager(i) } $(this).removeClass("SelectedStream"); $(this).clone(true, true).appendTo(g); if (j.is(":not(div." + i + " div.StreamView:last)")) { j.animate({ left: "-350px" }, 600, function() { $(this).css("display", "none") }); g.css({ display: "block", left: "350px" }).animate({ left: h }, 600, function() { }) } }); $("div.RightColumn div.StreamHolder div.PrivateLock").parent().parent().css("opacity", "0.4"); if (msie_80) { $("div.RightColumn div.StreamHolder div.PrivateLock").css("opacity", "0.4").parent().css("opacity", "0.4") } } else { if (f == 2) { var b = $("div.SelectedStream:first img:first").attr("src"); var h = "14px"; var j = d.find(".StreamView:visible"); if (g.find(".StreamHolder").length == 12) { g.after('<div class="StreamView"></div>'); g = d.find("div.StreamView:last"); g.css("display", "none"); initPager(i) } var a = $("div.Panel2 div.SelectedStream").length; if (a >= 5) { g.append('<div onclick="chooseClickType(this)" class="StreamHolder StupeFlix"><div alt="Remove" title="Remove" class="StreamRemove"></div><div class="StupeflixOverlay"></div><div class="StreamImages"><img src="' + b + '" alt="" /></div></div>'); g.find("div.StupeFlix:last").bind("click", streamClick2); g.find("div.StupeFlix:last div.StreamRemove").bind("click", stupeflixRemove); k.removeClass("SelectedStream") } if (j.is(":not(div." + i + " div.StreamView:last)")) { j.animate({ left: "-350px" }, 600, function() { $(this).css("display", "none"); updatePager() }); g.css({ display: "block", left: "350px" }).animate({ left: h }, 600) } $("div.RightColumn div.StreamHolder div.PrivateLock").parent().parent().css("opacity", "0.4"); if (msie_80) { $("div.RightColumn div.StreamHolder div.PrivateLock").css("opacity", "0.4").parent().css("opacity", "0.4") } } } d.find(".PagerPages .PageSelected").removeClass("PageSelected"); d.find(".PagerPages span:last").addClass("PageSelected"); $("#ProgressBackHolder").css("display", "block"); $("div.CreateArrowLeft,div.CreateArrowRight").css("opacity", "0.2"); checkCentreColumn(); createMemory(); $("#ProgressBackHolder").css("display", "block"); if (i == "Panel3") { setTimeout("createDropDownAjax(1,true)", 200) } else { if (i == "Panel4") { setTimeout("createDropDownAjax(2,true)", 500) } } $("#ProgressBackHolder").css("display", "none"); $("#CreateArrowLeft,#CreateArrowRight").css("opacity", "1") } function reloadCreate() { createMemory(); createDropDownAjax(); $("#ProgressBackHolder").css("display", "none"); $("div.CreateArrowLeft,div.CreateArrowRight").css("opacity", "1") } function stupeflixRemove() { var a = $(this).closest("div.Panel").attr("class").charAt(11); $(this).addClass("REMOVEME"); if ($(this).parent().parent().find(".StreamHolder").length == 1) { $(this).parent().parent().remove(); initPager("Panel" + a); $(".Panel" + a + " .StreamView:last").css({ display: "block", left: "-350px" }).animate({ left: "14px" }, 300) } searchRemove2(this, "Panel" + a); $(this).parent().remove(); checkCentreColumn2() } var content_dropdown_pos; var content_pager_pos; var content_pager_pos_last; var slide_dropdown_pos; var slide_pager_pos; var stream_dropdown_pos; var stream_pager_pos; function createMemory() { content_dropdown_pos = $("#Panel2 select:eq(0) option").index($("#Panel2 select:eq(0) option:selected")); content_pager_pos = $("#Panel2 .PagerPages span").index($("#Panel2 .PagerPages span.PageSelected")); slide_dropdown_pos = $("#Panel3 select:eq(0) option").index($("#Panel3 select:eq(0) option:selected")); slide_pager_pos = $("#Panel3 div.PagerPages span").index($("#Panel3 div.PagerPages span.PageSelected")); stream_dropdown_pos = $("#Panel4 select:eq(0) option").index($("#Panel4 select:eq(0) option:selected")); stream_pager_pos = $("#Panel4 .PagerPages span").index($("#Panel4 .PagerPages span.PageSelected")) } function uploaderFix(a) { content_dropdown_pos = $(a).find("option").index($(a).find("option:selected")) } function addCrosses() { $(".RightColumn .StreamView .StreamHolder").each(function() { if ($(this).find(".StreamRemove").length == 0) { $(this).prepend('<div alt="Remove" title="Remove" onclick="removeContentAjax(this)" class="StreamRemove StreamIcon"></div>') } }); $("div.StreamHolder div.StreamIcon").css("opacity", "0.5"); stopPropagation() } function addCrosses2() { $("div.Panel div.StreamView div.StreamHolder .StreamRemove").css({ display: "block" }) } function addTimings() { $("div.Panel4 div.StreamHolder:not(.StreamThumbnail) div.StreamTimings").css("display", "block") } function addPreview() { var a = window.location.href; if (a.indexOf("CreateWizard.aspx") != -1) { $("div.Panel div.StreamView div.StreamHolder:not(.StreamThumbnail)").css("display", "block") } else { if (a.indexOf("Download.aspx") != -1) { } else { if (a.indexOf("ChannelDetails.aspx") != -1) { $(".StreamHolder").each(function() { if ($(this).find("div.StreamPreview").length == 0) { $(this).prepend('<div onclick="popPreview(this)" alt="Preview" title="Preview" class="StreamPreview StreamIcon"></div>') } }) } } } $("div.StreamHolder div.StreamIcon").css("opacity", "0.5") } function showIcons() { $("div.StreamHolder:not(.HoverEffectAdded)").hover(function() { $(this).find(".StreamIcon").stop(true, true).animate({ opacity: "1" }, 200) }, function() { $(this).find(".StreamIcon").animate({ opacity: "0.5" }, 200) }); $("div.StreamHolder").addClass("HoverEffectAdded") } function popPreview(d) { var a = $(d).parent().find(".StreamImages").next("span").text(); $("#StreamPreviewTitle").html(a); var c; if (window.location.href.indexOf("CreateWizard.aspx") != -1) { if ($(d).closest(".Panel").attr("id") == "Panel2") { c = "R" } else { if ($(d).closest(".Panel").attr("id") == "Panel3") { c = "S" } else { c = "C" } } var b = $(d).parent().find("div.StreamMeta span.MetaKey").html() } else { if (window.location.href.indexOf("Download.aspx") != -1) { } else { if (window.location.href.indexOf("ChannelDetails.aspx") != -1) { c = "C"; var b = $(d).parent().find("img:first").attr("class") } } } var e = new Date().getTime(); $.get(ajax_path_get + "?command=getPreview&type=" + c + "&ID=" + b + "&" + e, function(i) { var h = new Array(); h = i.split(",,"); var j = new Array(); j = h[1].split("||"); if (h[0] == "A") { if (j.length > 1) { $("#divStreamPreview #divStreamPreviewContent").empty().append('<div class="PopPreviewImageHolder"></div>'); var g = ""; for (var f = 0; f < j.length; f++) { g = g + '<img src="' + j[f] + '" alt="" />' } $("#divStreamPreview .PopPreviewImageHolder").append(g); popPreviewSlides(); $("#divStreamPreview #divStreamPreviewContent img:eq(0)").load(function() { positionPreview() }) } else { $("#divStreamPreview #divStreamPreviewContent").empty().append('<img src="' + h[1] + '" alt="" />'); $("#divStreamPreview #divStreamPreviewContent img").css("display", "block"); $("#divStreamPreview #divStreamPreviewContent img").load(function() { positionPreview() }) } } else { $("#divStreamPreview #divStreamPreviewContent").empty().append('<div id="divPreviewFlash"></div>'); swfobject.embedSWF(h[1], "divPreviewFlash", "900", "600", "8.0.22", "", { screencolor: "000000", autostart: "true", controlbar: "none" }, { allowfullscreen: "true", wmode: "opaque", allowscriptaccess: "always" }, {}); positionPreview() } }) } function positionPreview() { var b = $("#divStreamPreview").width(); if (b > 950) { b = 950 } var a = $("body").width(); if (a < 998) { a = 998 } var d = $(document).height(); var c = parseInt(a / 2) - (b / 2); if (msie_old) { $("select").css({ visibility: "hidden" }) } $("div#CoverLayer").stop(true, true).css({ width: a, height: d, opacity: 0.7, display: "block" }); $("#divStreamPreview").css({ width: b, left: c }).fadeIn(300); $("#divStreamPreview img").css({ width: (b - 40) }); $(window).resize(function() { var e = $("body").width(); if (e < 998) { e = 998 } var g = $(document).height(); var f = parseInt(e / 2) - (b / 2); $("div#CoverLayer").stop(true, true).css({ width: e, height: g }); $("#divStreamPreview").css({ left: f }).fadeIn(300) }) } var pop_preview_timer; var pop_preview_pos = 0; function popPreviewSlides() { var a = $("#divStreamPreview .PopPreviewImageHolder"); var b = a.find("img"); b.css("display", "none"); b.eq(pop_preview_pos).css("display", "block"); if (pop_preview_pos < (b.length - 1)) { pop_preview_pos++ } else { pop_preview_pos = 0 } pop_preview_timer = setTimeout("popPreviewSlides()", 3000) } function unStreamPreview() { var a = $("#divStreamPreview").width(); clearTimeout(pop_preview_timer); $("#divStreamPreview").fadeOut(200, function() { $("div.CoverLayer").fadeOut(200); $("div.StreamPreviewClose").css("display", "none") }) } function searchRemove(a) { var f = $(a).parent().parent().parent().find("div.StreamView"); if (f.length > 1) { var e = f.length; var d = f.index($(a).parent().parent()) + 1; if (d < e) { next_stream_view = $(a).parent().parent().next("div.StreamView"); var b = next_stream_view.find("div.StreamHolder:first"); b.clone(true, true).appendTo($(a).parent().parent()); b.remove(); if (next_stream_view.find("div.StreamHolder").length == 11 && next_stream_view.next("div.StreamView").length == 1) { searchRemove(next_stream_view.find("div.StreamRemove:first")) } if (next_stream_view.find(".StreamHolder").length == 0) { next_stream_view.remove(); initPager("RightColumn") } } } else { if ($(a).parent().is(".ButtonRed")) { var c = $("div.RightColumn div.StreamView:last"); if (c.find("div.StreamHolder").length == 1) { c.remove(); c = $("div.RightColumn div.StreamView:last"); c.css({ display: "block", left: "-350px" }).animate({ left: "2px" }, 600); initPager("RightColumn"); updatePager() } a = $("div.RightColumn div.SelectedStream div.StreamRemove"); searchRemove(a) } } } function searchRemove2(b, a) { var c = $("div." + a + " div.StreamView:last"); if (c.find("div.StreamHolder").length == 1) { c.remove(); initPager(a); updatePager(a) } b = $("div." + a + " div.REMOVEME"); searchRemove(b) } function addWeight() { $(".RightColumn .StreamView .StreamHolder").each(function() { var a = $(this).find(".StreamMeta .MetaWeight").html(); if ($(this).find(".StreamWeight").length == 0) { $(this).prepend('<div class="StreamWeight"></div>') } $(this).find(".StreamWeight").html(a); if (isShowWeight() == "1") { showWeighting() } }) } function addProperties(a) { $("div." + a + " div.StreamView div.StreamHolder div.StreamProperties").css("display", "block"); $("div." + a + " div.BindMeP").bind("click", { area: a }, function(e) { $(this).addClass("PropertyEditing"); if (e.data.area == "Panel2") { $("#HiddenContentPanel input").attr("value", "Panel2"); $("#ContentPropertiesTitle span").html("Content"); var b = "getRawContent"; var d = $(this).parent().find("div.StreamMeta span.MetaKey").html(); var c = "contentID" } else { if (e.data.area == "Panel3") { $("#HiddenContentPanel input").attr("value", "Panel3"); $("#ContentPropertiesTitle span").html("Slide"); var b = "getSlideProperties"; var d = $(this).parent().find("div.StreamMeta span.MetaKey").html(); var c = "slideID" } } $("#DivPopUpContentProperties #HiddenContentID").html(d); var f = new Date().getTime(); $("#DivPopUpContentProperties input.TextBox:not(#HiddenContentPanel input)").each(function() { $(this).removeAttr("value") }); $.get(ajax_path_get + "?command=" + b + "&" + c + "=" + d + "&" + f, function(i) { var h = i; ajax_array = h.split("||"); var j = new Array; for (var g = 0; g < ajax_array.length; g++) { j[g] = ajax_array[g].split(",,") } for (var k = 0; k < $("#DivPopUpContentProperties input.TextBox").length; k++) { if (k == 4) { j[0][k] = unMicEncode(j[0][k]) } $("#DivPopUpContentProperties input.TextBox:eq(" + k + ")").val(j[0][k]) } }); BlackOut2("DivPopUpContentProperties") }); $("div." + a + " div.BindMeP").removeClass("BindMeP") } function updateProperties(d) { if ($("#DivPopUpContentProperties #HiddenContentPanel input").val() == "Panel2") { var a = "putRawContent" } else { var a = "editSlideProperties" } var b = $("#DivPopUpContentProperties #HiddenContentID").html(); var c = a + ",," + b + ",," + $("#RCTitle").val() + ",," + $("#RCCreator").val() + ",," + $("#RCCaption").val() + ",," + $("#RCDate2 .TextBox").val() + ",," + micEncode($("#RCURL").val()) + ",," + $("#RCDuration").val(); $.post(ajax_path_put, { command: c }, function(e) { $("#DivPopUpContentProperties input.ValidateField").removeClass("ValidateField"); if (e == 1) { $("div.PropertyEditing").removeClass("PropertyEditing").parent().find("span:eq(0)").html($("#RCTitle").val()); unBlackOut2v2() } else { if (e == -4) { $("#ContentPropertyValidation").html("Please enter a title").slideDown(300); $("#RCTitle").addClass("ValidateField") } else { if (e == -1) { $("#ContentPropertyValidation").html("Please enter a valid date in the format DD/MM/YYYY").slideDown(300); $("#RCDate").addClass("ValidateField") } else { if (e == -2) { $("#ContentPropertyValidation").html("Please enter a valid duration. Must be a number").slideDown(300); $("#RCDuration").addClass("ValidateField") } else { if (e == -3) { $("#ContentPropertyValidation").html("Display duration is out of bounds.").slideDown(300); $("#RCDuration").addClass("ValidateField") } } } } } }) } var pager_max = 13; function initPager(a) { if (a == "LeftColumn" && $("div.MiniNavigation .Active a").html() == "Browse") { var e = $("div." + a + " .MiniNavDivs:eq(0)") } else { if (a == "LeftColumn") { var e = $("div." + a + " .MiniNavDivs:eq(1)") } else { var e = $("div." + a) } } var c = e.find("div.StreamView"); var j = c.length; var b = 48; var h = 0; var l = 0; var f = e.find("div.PagerNav"); if (j == 0) { f.css("display", "none"); return false } else { f.css("display", "block") } f.clone().insertAfter(f); f.eq(0).remove(); f = $("div." + a + " div.PagerNav"); var d = f.find("div.PagerPages"); d.empty(); c.eq(0).css("display", "block"); if (j >= 1) { for (var g = 1; g <= j; g++) { d.append("<span>" + g + "</span>"); if (g < pager_max + 1) { b = b + 14; l = h + 14 } h = h + 14 } f.css({ display: "block", width: b + "px" }); d.css({ width: h + "px" }); f.find("div.PagerPagesOuter").css({ width: l + "px" }) } d.find("span:eq(0)").addClass("PageSelected"); var k; f.find("*").click(function() { if (a == "RightColumn") { k = "2px" } else { k = "14px" } }); d.find("span").click(function() { if (a == "LeftColumn" && $("div.MiniNavigation .Active a").html() == "Browse") { var o = $("div." + a + " .MiniNavDivs:eq(0)") } else { if (a == "LeftColumn") { var o = $("div." + a + " .MiniNavDivs:eq(1)") } else { var o = $("div." + a) } } var q = o.find("div.StreamView"); var i = q.length; var n = $(this).html(); var m = q.eq((n - 1)); var p = o.find("div.StreamView:visible"); if (q.index(p) != (n - 1)) { if (q.index(p) > (n - 1)) { p.animate({ left: "350px" }, 300, function() { $(this).css("display", "none"); updatePager() }); m.css({ display: "block", left: "-350px" }).animate({ left: k }, 300) } else { p.animate({ left: "-350px" }, 300, function() { $(this).css("display", "none"); updatePager() }); m.css({ display: "block", left: "350px" }).animate({ left: k }, 300) } } }); f.find("span.PagerStart").click(function() { var i = e.find("div.StreamView:visible"); if (c.index(i) != 0) { i.animate({ left: "350px" }, 300, function() { $(this).css("display", "none"); updatePager() }); c.eq(0).css({ display: "block", left: "-350px" }).animate({ left: k }, 300) } }); f.find("span.PagerEnd").click(function() { var m = e.find("div.StreamView:visible"); var i = e.find("div.StreamView:last"); if (c.index(m) != c.index(i)) { m.animate({ left: "-350px" }, 300, function() { $(this).css("display", "none"); updatePager() }); i.css({ display: "block", left: "350px" }).animate({ left: k }, 300) } }); f.find("span.PagerNext").click(function() { var m = e.find("div.StreamView:visible"); var i = e.find("div.StreamView:last"); if (c.index(m) != c.index(i)) { m.animate({ left: "-350px" }, 300, function() { $(this).css("display", "none"); updatePager() }); c.eq((c.index(m) + 1)).css({ display: "block", left: "350px" }).animate({ left: k }, 300) } }); f.find("span.PagerPrevious").click(function() { var m = e.find("div.StreamView:visible"); var i = c.eq(0); if (c.index(m) != c.index(i)) { m.animate({ left: "350px" }, 300, function() { $(this).css("display", "none"); updatePager() }); c.eq((c.index(m) - 1)).css({ display: "block", left: "-350px" }).animate({ left: k }, 300) } }) } function updatePager() { $("div.PagerNav span.PageSelected").removeClass("PageSelected"); $("div.PagerNav").each(function() { var b = $(this).find("div.PagerPages"); var a = b.find("span"); var f = $(this).parent().find("div.StreamView"); var c = f.length; var g = f.index($(this).parent().find("div.StreamView:visible")); a.eq(g).addClass("PageSelected"); if (a.index($(this).find("div.PagerPages span.PageSelected")) > Math.floor((pager_max / 2))) { if (a.index($(this).find("div.PagerPages span.PageSelected")) < (a.length - Math.floor((pager_max / 2)))) { var d = (g - Math.floor((pager_max / 2))); var e = (d * -14) + "px"; b.animate({ left: e }) } else { var e = (b.parent().width() - b.width()) + "px"; b.animate({ left: e }) } } else { var e = 0 + "px"; b.animate({ left: e }) } }) } var panel_var; var whatpanel; function initArrowNav() { panel_var = 0; var a = $("#NavigationArrows div"); a.eq(0).find("a").css({ color: "#FFF" }).parent().find("img:eq(0)").css("display", "block"); a.eq(1).css({ zIndex: "2", left: "-20px" }).find("img:eq(1)").css("display", "block"); a.eq(2).css({ zIndex: "1", left: "-40px" }).find("img:eq(1)").css("display", "block"); whatpanel = 0 } function updateArrowNav(b) { $("#Panel" + (b + 2) + " div.StreamHolder").css("cursor", "default"); $("#Panel" + (b + 1) + " div.StreamHolder").css("cursor", "pointer"); whatpanel = b; var c = $("#NavigationArrows div"); var d = $("#SlidingPanelsInner"); var a = $("#CreateNextButton"); c.each(function() { $(this).find("img").css({ display: "none" }).parent().find("img:eq(1)").css("display", "block").parent().find("a").css("color", "#8EB6D8") }); c.eq(0).css({ zIndex: "3" }); c.eq(1).css({ zIndex: "2" }); c.eq(2).css({ zIndex: "1" }); c.eq(b).find("img").css("display", "none").parent().find("img:eq(0)").css("display", "block").parent().find("a").css("color", "#FFF").parent().css("zIndex", "4"); if (b == 0) { $("#CreateArrowRight").removeClass("CreateArrowRight2"); $("#CreateArrowLeft").addClass("CreateArrowLeft2"); d.animate({ left: "0px" }, 500, function() { a.html("Next  <span>&raquo;</span>") }); $("#IntroText").html("Upload your content (photos, videos and Flash files), edit their properties and organise your content into folders.") } if (b == 1) { $("#CreateArrowLeft").removeClass("CreateArrowLeft2"); $("#CreateArrowRight").removeClass("CreateArrowRight2"); d.animate({ left: "-515px" }, 500, function() { a.html("Next  <span>&raquo;</span>") }); $("#IntroText").html("Select Content on left, choose a template in the middle and Convert your Content into Slides on right.") } if (b == 2) { $("#CreateArrowLeft").removeClass("CreateArrowLeft2"); $("#CreateArrowRight").addClass("CreateArrowRight2"); d.animate({ left: "-1030px" }, 500, function() { a.html("Finished<span>&nbsp;</span>") }); c.eq(1).css({ zIndex: "3" }); $("#IntroText").html("Select which Slides you want to show in your Stream(s) and when you want them to show.") } d.find("div.SelectedStream").removeClass("SelectedStream"); checkCentreColumn2() } function initBrowseNav() { if (window.location.href.indexOf("Download.aspx") != -1) { var d = $("#BrowseNav div.NavHolder") } else { var d = $("#DivPopUpStreamProperties:first #BrowseNav div.NavHolder") } var b = d.length; d.stop(true, true); for (var a = 1; a < 8; a++) { d.eq((7 - a)).css("zIndex", a) } if (b <= 3) { d.removeClass("ClosedNav").addClass("OpenNav") } else { $("div#BrowseNav div.NavHolder:lt(" + (b - 3) + ")").removeClass("OpenNav").addClass("ClosedNav").find("img").attr("src", "Images/Default/browse-nav-closed.png"); $("div#BrowseNav div.NavHolder:gt(" + (b - 4) + ")").removeClass("ClosedNav").addClass("OpenNav") } var e = $("div#BrowseNav div.ClosedNav"); var c = $("div#BrowseNav div.OpenNav"); e.animate({ width: "31px" }, nav_speed); e.find(".BrowseMain").animate({ width: "0px", paddingLeft: "31px" }, nav_speed); e.find("img").animate({ width: "31px" }, nav_speed); c.find(".BrowseMain").animate({ width: "96px", paddingLeft: "15px" }, nav_speed); c.find("img").attr("src", "Images/Default/browse-nav-open.png"); c.find("img").animate({ width: "111px" }, nav_speed); c.animate({ width: "111px" }, nav_speed) } var ajax_path_get = "/get.ox"; var ajax_path_put = "/put.ox"; function AjaxTest() { $.get(ajax_path_get + "?command=pcs", function(b) { var a = b; $("#AJAXTEST").html(a) }) } function createAccountAjax() { var b = $("#ExistingUser:visible input[type=text]:eq(0)").val(); var a = $("#ExistingUser:visible input[type=password]:eq(0)").val(); var e = $("#ExistingUser:visible input[type=text]:eq(1)").val(); var d = $("#ExistingUser:visible input[type=text]:eq(2)").val(); var c = "signup,," + b + ",," + a + ",," + e + ",," + d; if ($("#ExistingUserTerms").is(":checked") && $("#ExistingUser:visible input[type=password]:eq(1)").val() == a) { $.post(ajax_path_put, { command: c }, function(f) { if (f == 1) { $("#HeaderLoggedIn2").css("display", "inline").prev("span").css("display", "inline"); $("#HeaderLoggedIn2").next("span").css("display", "inline"); $("#HeaderLoggedIn").css("display", "inline").prev("span").css("display", "none"); $("#HeaderLoggedIn span").html(e); $("#HeaderLoggedOut").css("display", "none"); unBlackOut2() } else { if (f == -1) { $("#ExistingUser input").each(function() { if ($(this).attr("value").length < 1) { $(this).addClass("ValidateField") } else { $(this).removeClass("ValidateField") } }); $("#DivLoginBox div.OxiValidation:eq(0)").slideUp(200); $("#ExistingUserValidation").html("Please fill out the highlighted boxes to proceed").slideDown(200) } else { if (f == -2) { $("#ExistingUser input[type=text]:eq(0)").addClass("ValidateField"); $("#DivLoginBox div.OxiValidation:eq(0)").slideUp(200); $("#ExistingUserValidation").html('This Email Address is already used. <a href="ForgottenPassword.aspx" title="Forgotten Password">Click here</a> to retrieve your password.').slideDown(200) } else { if (f == -3) { $("#ExistingUser input[type=text]:eq(0)").addClass("ValidateField"); $("#DivLoginBox div.OxiValidation:eq(0)").slideUp(200); $("#ExistingUserValidation").html("Please enter a valid Email Address.").slideDown(200) } } } } $("#ProgressLogin").css({ display: "none" }) }) } else { if ($("#ExistingUserTerms").is(":not(:checked)")) { $("#DivLoginBox div.OxiValidation:eq(0)").slideUp(200); $("#ExistingUserValidation").html("Please agree to the Oxigen terms and conditions.").slideDown(200); $("#ProgressLogin").css({ display: "none" }) } else { $("#DivLoginBox div.OxiValidation:eq(0)").slideUp(200); $("#ExistingUserValidation").html("Passwords do not match.").slideDown(200); $("#ProgressLogin").css({ display: "none" }) } } } function shuffle(d) { var a, c, b = d.length; if (b) { while (--b) { c = Math.floor(Math.random() * (b + 1)); a = d[c]; d[c] = d[b]; d[b] = a } } return d } function addFolderAjax() { var f = $("div.WindowsView:visible div.WindowsTree .WindowsTreeContent div.WindowsFolder").length; for (var c = 0; c < f; c++) { var d = "New Folder " + c; if ($("." + d).length == 0) { var e = "New Folder " + c } } var a = $(".ManageScreenOpen").parent().parent().parent().attr("id"); if (location.href.indexOf("Download.aspx") == -1) { if (a == "Panel2") { ajax_command = "addAssetContentFolder" } else { if (a == "Panel3") { ajax_command = "addSlideFolder" } else { } } } else { ajax_command = "addPC" } var b = ajax_command + ",," + e; $.post(ajax_path_put, { command: b }, function(g) { $(".FolderOpen").removeClass("FolderOpen"); $("div.WindowsView:visible div.WindowsTree .WindowsTreeContent div.WindowsFolder:last").removeClass().addClass("AjaxFolder" + g).addClass("WindowsFolder").addClass("FolderOpen"); $("div.WindowsView div.WindowsHolder").css("display", "none"); $("div.WindowsView div.WindowsHolder:last").css("display", "block") }) } function addPCAjax() { var a = "addPC,,Temporary PC"; var b = "DropDownPCs"; $.post(ajax_path_put, { command: a }, function(d) { var c = new Date().getTime(); $.get(ajax_path_get + "?command=pcs&" + c, function(m) { var i = m; var h = 0; if (i.length == 0) { h = 1 } ajax_array = i.split("||"); var e = new Array; for (var n = 0; n < ajax_array.length; n++) { e[n] = ajax_array[n].split(",,") } $("#" + b + " select").empty(); if (h == 0) { for (var f = 0; f < ajax_array.length; f++) { var o = e[f][1]; var j = e[f][0]; var k = e[f][2]; var g = "'RightColumn'"; $("#" + b + " select").append('<option value="' + j + '">' + o + "</option>"); $("#" + b + " select option:last").data("phantom", k) } var l = $("#" + b + " select option:last").attr("value"); $("#" + b + " select option:last").attr("selected", "selected"); streamlistAjax(l, "RightColumn", "1", "4") } else { var j = "-1"; $("#" + b + " select").append('<option value="' + j + '" onfocus="streamlistAjax(' + j + "," + g + ', 1)">My PC</option>') } }) }) } function removeFolderAjax() { var b = $(".ManageScreenOpen").parent().parent().parent().attr("id"); if (b == "Panel2") { ajax_command = "removeAssetContentFolder" } else { if (b == "Panel3") { ajax_command = "removeSlideFolder" } else { ajax_command = "removePCFolder" } } var a = $(".FolderOpen").attr("class").substring(10, $(".FolderOpen").attr("class").indexOf(" ")); var c = ajax_command + ",," + a; $.post(ajax_path_put, { command: c }, function(e) { if (e != -1) { $("div.WindowsHolder").css("display", "none"); var d = $("div.WindowsView:visible div.WindowsTree .WindowsTreeContent div.WindowsFolder").index($("div.WindowsView:visible div.WindowsTree .WindowsTreeContent div.FolderOpen")); $("div.WindowsView:visible div.WindowsHolder:eq(" + d + ")").remove(); $("div.WindowsView:visible div.WindowsTree .WindowsTreeContent div.FolderOpen").remove(); $("div.WindowsView:visible div.RFormBox input").removeAttr("value"); $("#ContentFolderName").empty() } else { $("div.WindowsView:visible .OxiValidation").html("Please unschedule content before removing folder.").slideDown(300) } }) } function setWeightingAjax(d) { var c = $("#DropDownPCs option:selected").val(); var a = $("#CentreColumn div.SelectedStream span.MetaKey").html(); var b = "channelWeighting ,," + c + ",," + a + ",," + d; $.post(ajax_path_put, { command: b }, function(e) { }) } function addContentAjax(b) { var d = $("#" + b + " option:selected").val(); var a = ""; $(".SelectedStream:not(#CentreColumn .SelectedStream,#PanelCenter .SelectedStream,.PanelCenter .SelectedStream)").each(function() { a += $(this).find("span.MetaKey").html() + "||" }); a = a.substring(0, (a.length - 2)); if (location.href.indexOf("Download.aspx") == -1) { if (whatpanel == "1") { ajax_command = "addSlideContents" } else { ajax_command = "addChannelContents" } } else { ajax_command = "addPCStream" } var c = ajax_command + ",," + d + ",," + a; $.post(ajax_path_put, { command: c }, function(e) { }) } function stopPropagation() { $(".StreamRemove:not(.PropStopped)").each(function() { $(this).addClass("PropStopped"); $(this).click(function(a) { $(".OxiValidation").slideUp(200); a.stopPropagation() }) }) } function removeContentAjax(d) { var b; var g = $(d).parent().parent().parent(); var f = $(d).closest(".StreamView").parent().attr("class"); if (g.is(".RightColumn")) { b = "DropDownPCs"; h = "removePCStream" } else { if (f == "Panel Panel2") { b = "DropDownFolders"; h = "removeRawContents" } else { if (f == "Panel Panel3") { b = "ForJQSlideDropDown"; h = "removeSlideContents" } else { if (f == "Panel Panel4") { b = "ForJQStreamDropDown"; h = "removeChannelContents" } } } } var e = $("#" + b + " option:selected").val(); var a = $(d).parent().find("span.MetaKey").html(); var h; var c = h + ",," + e + ",," + a; $.post(ajax_path_put, { command: c }, function(i) { if (i != -1) { if (window.location.href.indexOf("CreateWizard.aspx") != -1) { var j = $(d).closest("div.Panel").attr("class").charAt(11); $(d).addClass("REMOVEME"); if ($(d).parent().parent().find(".StreamHolder").length == 1) { $(d).parent().parent().remove(); initPager("Panel" + j); $(".Panel" + j + " .StreamView:last").css({ display: "block", left: "-350px" }).animate({ left: "14px" }, 300); $(".Panel" + j + " .PagerPages .PageSelected").removeClass("PageSelected"); $(".Panel" + j + " .PagerPages span:last").addClass("PageSelected") } searchRemove2(d, "Panel" + j); $(d).parent().remove(); checkCentreColumn2() } else { var j = "RightColumn"; $(d).addClass("REMOVEME"); if ($(d).parent().parent().find(".StreamHolder").length == 1) { $(d).parent().parent().remove(); initPager(j); $("." + j + " .StreamView:last").css({ display: "block", left: "-350px" }).animate({ left: "14px" }, 300); $("." + j + " .PagerPages .PageSelected").removeClass("PageSelected"); $("." + j + " .PagerPages span:last").addClass("PageSelected") } searchRemove2(d, j); $(d).parent().remove(); checkCentreColumn() } } else { $("#Panel3 .PanelInputFields .OxiValidation").html("Please unschedule before removing.").slideDown(300) } }) } function autoLogIn(b) { var a = "login,," + b; $.post(ajax_path_put, { command: a }, function(d) { var c = 0; if (d != 0) { var c = 1 } else { var c = 0; $("#DivLoginBox div.OxiValidation:eq(0)").html("Login unsuccessful. Password or username may be incorrect.").slideDown(300); $("#ProgressLogin").css({ display: "none" }) } if (c == 1) { logged_in = 1; $("#HeaderLoggedIn").css("display", "inline").prev("span").css("display", "none"); $("#HeaderLoggedIn span").html(d); $("#HeaderLoggedOut").css("display", "none"); if ($("#ProgressLogin").attr("class") == "SendMeToCreate") { location.href = "/CreateWizard.aspx" } else { unBlackOut2(); dropDownAjax("DropDownPCs") } } endProgressBar("ProgressBackHolder") }) } var logged_in; function loginAjax() { $("#ProgressLogin").css({ display: "block", opacity: "0.9" }); var e = $("#DivLoginBox #LogEmailInput:visible input").val(); var b = $("#DivLoginBox #LogPasswordInput:visible input").val(); var d = $('#DivLoginBox #LogRememberCheck:visible input[type="checkbox"]').is(":checked"); if (d == true) { toCookie("Login", (e + ",," + b + ",,1")); d = "1" } else { d = "0" } var a = ajax_path_put; var c = "login,," + e + ",," + b + ",," + d; $.post(a, { command: c }, function(g) { var f = 0; if (g != 0) { var f = 1 } else { var f = 0; $("#DivLoginBox div.OxiValidation:eq(0)").html("Login unsuccessful. Password or username may be incorrect.").slideDown(300); $("#ProgressLogin").css({ display: "none" }) } if (f == 1) { $("#AddPCLink").css("visibility", "visible"); logged_in = 1; $("#HeaderLoggedIn").css("display", "inline").prev("span").css("display", "none"); $("#HeaderLoggedIn span").html(g); $("#HeaderLoggedIn2").css("display", "inline").prev("span").css("display", "inline"); $("#HeaderLoggedIn2").next("span").css("display", "inline"); $("#HeaderLoggedOut").css("display", "none"); if ($("#ProgressLogin").attr("class") == "SendMeToCreate") { location.href = "/CreateWizard.aspx" } else { unBlackOut2(); dropDownAjax("DropDownPCs") } } endProgressBar("ProgressBackHolder") }) } function logoutAjax() { var a = ajax_path_put; var b = new Date().getTime(); toCookie("Login", "-1"); $.get(ajax_path_get + "?command=logout", function(d) { var c = 0; if (d == 1) { var c = 1 } else { var c = 0 } if (c == 1) { dropDownAjax("DropDownPCs"); window.location = "Home.aspx" } }) } var stream_icons_html = ""; function streamlistAjax(c, a, j, g) { initProgressBar("ProgressBackHolder"); var b = new Array; if (j == 1) { j = "pc"; var d = '<div alt="Delete Content" title="Delete Content" onclick="removeContentAjax(this)" class="StreamRemove StreamIcon"></div>'; var h = '<div onclick="popPreview(this)" alt="Preview" title="Preview" class="StreamPreview StreamIcon"></div>'; stream_icons_html = d + h } else { j = "folder"; var d = '<div alt="Delete" title="Delete" onclick="removeContentAjax(this)" class="StreamRemove StreamIcon"></div>'; var i = '<div alt="Edit Properties" title="Edit Properties" class="StreamProperties StreamIcon BindMeP">P</div>'; var e = '<div onclick="popScheduleInfo(this);BlackOut2(\'DivPopUpTimings\')" alt="Slide Scheduling" title="Slide Scheduling" class="StreamTimings StreamIcon"></div>'; var h = '<div onclick="popPreview(this)" alt="Preview" title="Preview" class="StreamPreview StreamIcon"></div>'; stream_icons_html = d + i + e + h } if (g == 4) { g = "pcStreams" } else { if (g == 0) { g = "rawContent" } else { if (g == 1) { g = "streamSlides" } else { g = "userStreams" } } } var f = new Date().getTime(); $.get(ajax_path_get + "?command=" + g + "&" + j + "ID=" + c + "&" + f, function(o) { var n = o; b = n.split("||"); var k = new Array; for (var u = 0; u < b.length; u++) { k[u] = b[u].split(",,") } var v = $("#" + a); v.find("div.StreamView").remove(); var y = '<div class="StreamView">'; if (g == "userStreams") { y += '<div onclick="thumbnailSelect(this)" class="StreamHolder StreamThumbnail"><div class="StreamImages"><img src="' + k[0][1] + '" alt=""/></div><span>Stream thumbnail</span></div>' } var p = 0; if (g == "userStreams") { p = 1 } for (var t = 1; t < b.length; t++) { var s = k[t][1]; if (s.length > 14 && (s.indexOf(" ") > 14 || s.indexOf(" ") == -1)) { s = s.substring(0, 14) + "<br/>" + s.substring(14) } var m = k[t][0]; var l = k[t][2]; var w = k[t][3]; var r = k[t][4]; var q = k[t][5]; if (g == "userStreams" && t == 1 && b.length == 1) { v.find("div.StreamView div.StreamThumbnail div.StreamImages img").attr("src", l) } if (p == 12) { y += ('</div><div class="StreamView">'); p = 0 } y += '<div onclick="chooseClickType(this);streamAjax(' + m + ');return false" class="StreamHolder">' + stream_icons_html + '<div class="StreamImages"><img src="' + l + '" alt="' + s + '"/></div><span>' + s + '</span><div class="StreamMeta"><span class="MetaKey">' + m + '</span><span class="MetaWeight">' + w + '</span><span class="MetaPrivate">' + r + '</span><span class="MetaRequest">' + q + "</span></div></div>"; p++; if (t == (b.length - 1)) { v.find("div.PagerNav").before(y) } } if (window.location.href.indexOf("CreateWizard.aspx") != -1) { v.find(".StreamView:first").css({ left: "16px" }) } else { v.find(".StreamView:first").css({ left: "2px" }) } if (g == "rawContent" && $("#DivPopUpUploader").is(":visible")) { unUploaderBlackOut() } if (j == "pc") { initPrivacy("LeftColumn"); initPrivacy("RightColumn"); initPager("LeftColumn"); addPreview(); addCrosses2(); streamBrowseView(); showIcons() } else { if (g == "streamSlides") { setTimeout("initPager('Panel4');streamBrowseView2();updatePager();showIcons();", 500) } initPager("Panel2"); initPager("Panel3"); initPager("Panel4"); updatePager(); streamBrowseView2(); addCrosses2(); addProperties("Panel2"); addProperties("Panel3"); addTimings(); addPreview(); showIcons() } addCrosses(); addWeight(); if (isShowWeight() == "1") { showWeighting() } if (g == "rawContent" && whatpanel == 1) { updateArrowNav(1) } if (g == "userStreams" && whatpanel == 2) { updateArrowNav(2) } if (g == "streamSlides" && whatpanel == 2) { updateArrowNav(2) } if (content_pager_pos > 0) { $("#Panel2 div.StreamView").stop(true, true).css({ left: "100px", display: "none" }); $("#Panel2 div.StreamView:eq(" + content_pager_pos + ")").css({ left: "16px", display: "block" }); $("#Panel2 .PagerPages span:eq(" + content_pager_pos + ")").click(); $("#Panel2 .PagerPages .PageSelected").removeClass("PageSelected"); $("#Panel2 .PagerPages span:eq(" + content_pager_pos + ")").addClass("PageSelected") } if (content_pager_pos_last > 0) { $("#Panel2 div.StreamView").stop(true, true).css({ left: "100px", display: "none" }); $("#Panel2 div.StreamView:last").css({ left: "16px", display: "block" }); $("#Panel2 .PagerPages span:last").click(); $("#Panel2 .PagerPages .PageSelected").removeClass("PageSelected"); $("#Panel2 .PagerPages span:last").addClass("PageSelected"); content_pager_pos_last-- } if (slide_pager_pos > 0) { $("#Panel3 div.StreamView").stop(true, true).css({ left: "100px", display: "none" }); $("#Panel3 div.StreamView:eq(" + slide_pager_pos + ")").css({ left: "16px", display: "block" }); $("#Panel3 .PagerPages span:eq(" + slide_pager_pos + ")").click(); $("#Panel3 .PagerPages .PageSelected").removeClass("PageSelected"); $("#Panel3 .PagerPages span:eq(" + slide_pager_pos + ")").addClass("PageSelected") } if (stream_pager_pos > 0) { $("#Panel4 div.StreamView").stop(true, true).css({ left: "100px", display: "none" }); $("#Panel4 div.StreamView:eq(" + stream_pager_pos + ")").css({ left: "16px", display: "block" }); $("#Panel4 .PagerPages span:eq(" + stream_pager_pos + ")").click(); $("#Panel4 .PagerPages .PageSelected").removeClass("PageSelected"); $("#Panel4 .PagerPages span:eq(" + stream_pager_pos + ")").addClass("PageSelected") } endProgressBar("ProgressBackHolder"); if (a == "RightColumn") { initPager("RightColumn") } }) } var available_thumbs; function thumbnailSelect(a) { available_thumbs = $(a).parent().parent().find("div.StreamHolder:not(.StreamThumbnail)"); $(a).css("backgroundImage", "url(/images/default/stream-green-blink.gif)").find("img").attr("src", "/images/default/thumbnail-select.gif"); available_thumbs.unbind("click", streamClick2); available_thumbs.bind("click", thumbnailSelectInner) } function thumbnailSelectInner() { $(".StreamThumbnail .StreamImages img").attr("src", $(this).find("img").attr("src")); $(".StreamThumbnail").css("backgroundImage", "url(/images/default/stream-green.gif)"); $(this).closest("div.StreamView").parent().find("div.StreamView:first").addClass("FirstStream"); if ($(this).closest("div.StreamView").is(":not(.FirstStream)")) { $(this).closest("div.StreamView").animate({ left: "350px" }, 300, function() { $(this).css("display", "none") }); $(this).closest("div.StreamView").parent().find("div.StreamView:first").css({ display: "block", left: "-350px" }).animate({ left: "16px" }, 300) } var b = $("#ForJQStreamDropDown option:selected").val(); var a = "putStreamThumbnail,," + b + ",," + $(this).find("img").attr("src"); $.post(ajax_path_put, { command: a }, function(c) { }); available_thumbs.bind("click", streamClick2); available_thumbs.unbind("click", thumbnailSelectInner) } function dropDownAjax(b) { var a = new Date().getTime(); $.get(ajax_path_get + "?command=pcs&" + a, function(j) { var g = j; var f = 0; if (g.length == 0) { f = 1 } ajax_array = g.split("||"); var c = new Array; for (var l = 0; l < ajax_array.length; l++) { c[l] = ajax_array[l].split(",,") } $("#" + b + " select").empty(); if (f == 0) { for (var d = 0; d < ajax_array.length; d++) { var m = c[d][1]; var h = c[d][0]; var i = c[d][2]; var e = "'RightColumn'"; $("#" + b + " select").append('<option value="' + h + '">' + m + "</option>"); $("#" + b + " select option:last").data("phantom", i) } var k = $("#" + b + " select option:first").attr("value"); streamlistAjax(k, "RightColumn", "1", "4") } else { var h = "-1"; $("#" + b + " select").append('<option value="' + h + '" onfocus="streamlistAjax(' + h + "," + e + ', 1)">My PC</option>') } }) } function popUploaderDropdown(a) { $("#UploadUserFolder").empty().html($("#DropDownFolders select").html()); $("#UploadUserFolder option:eq(" + $("#DropDownFolders select option").index($("#DropDownFolders select option:selected")) + ")").attr("selected", "selected") } function bytesConverter(b) { var d = 1073741824; var a = 1048576; var c = 1024; if (b > d) { b = roundNumber((b / d), 2) + " gb" } else { if (b > a) { b = roundNumber((b / a), 2) + " mb" } else { if (b > c) { b = roundNumber((b / c), 2) + " kb" } else { b = b + "b" } } } return b } function roundNumber(b, c) { var a = Math.round(b * Math.pow(10, c)) / Math.pow(10, c); return a } var container_array = new Array("Panel2", "Panel3", "Panel4"); function createDropDownAjax(b, d) { var a; if (b) { a = b } var c = new Date().getTime(); $.get(ajax_path_get + "?command=folders&" + c, function(k) { var n = new Array("DropDownFolders", "ForJQSlideDropDown", "ForJQStreamDropDown"); var j = k; var i = 0; if (j.indexOf("|") == -1) { i = 1 } ajax_array = j.split("||"); var f = new Array; for (var o = 0; o < ajax_array.length; o++) { f[o] = ajax_array[o].split(",,") } if (i == 0) { var m = 0; var p = ajax_array.length; if (a) { $("#" + n[a] + " select").empty(); m = a; p = a + 1 } else { $("#" + n[0] + " select").empty(); $("#" + n[1] + " select").empty(); $("#" + n[2] + " select").empty() } for (var l = m; l < p; l++) { var q = ""; for (var e = 0; e < f[l].length; e = e + 2) { q += '<option value="' + f[l][e] + '">' + f[l][e + 1] + "</option>" } $("#" + n[l] + " select").html(q); if (l == 0) { $("#" + n[l] + " select option:eq(" + content_dropdown_pos + ")").attr("selected", "selected") } if (l == 1) { $("#" + n[l] + " select option:eq(" + slide_dropdown_pos + ")").attr("selected", "selected") } if (l == 2) { $("#" + n[l] + " select option:eq(" + stream_dropdown_pos + ")").attr("selected", "selected") } $("#" + n[l] + " select").change(function() { dropDownStreamPopulate(this) }); if (d) { dropDownStreamPopulate($("#" + n[l] + " select"), d) } else { dropDownStreamPopulate($("#" + n[l] + " select")) } } } else { var g = "-1"; $("#" + n[0] + " select").append("<option>My Folder</option>"); $("#" + n[1] + " select").append("<option>My Folder</option>"); $("#" + n[2] + " select").append("<option>My Folder</option>") } updateArrowNav(whatpanel) }) } function dropDownStreamPopulate(b, e) { var a = $(b).closest("div.Panel"); if (e != null) { } else { if (a.is("#Panel2")) { $("#Panel2 div.PagerPages span.PageSelected").removeClass("PageSelected"); $("#Panel2 div.PagerPages span:first").addClass("PageSelected"); content_pager_pos = 0 } else { if (a.is("#Panel3")) { $("#Panel3 div.PagerPages span.PageSelected").removeClass("PageSelected"); $("#Panel3 div.PagerPages span:first").addClass("PageSelected"); slide_pager_pos = 0 } else { $("#Panel4 div.PagerPages span.PageSelected").removeClass("PageSelected"); $("#Panel4 div.PagerPages span:first").addClass("PageSelected"); stream_pager_pos = 0 } } } createMemory(); if ($(b).find("option:selected")) { var d = $(b).find("option:selected").attr("value") } if ($(b).attr("class")) { var c = $(b).attr("class").charAt(27) - 1 } streamlistAjax(d, container_array[c], 0, c) } function searchAjax(b) { var c = new Array; var a = $(b).closest("div.SearchPanel").find("input").val(); var f = $("#ForJSDownloadHidden input").val(); if (f.length > 0) { $(".MiniNavDivs:eq(1) input").removeAttr("value"); $("#ForJSDownloadHidden input").removeAttr("value") } var e = escape(a); var d = new Date().getTime(); $.get(ajax_path_get + "?command=search&keyword=" + e + "&" + d, function(k) { var j = k; if (k.length != 0) { c = j.split("||"); var g = new Array; for (var q = 0; q < c.length; q++) { g[q] = c[q].split(",,") } if ($("div.MiniNavigation .Active a").html() == "Browse") { var r = $("div.LeftColumn div.MiniNavDivs:eq(0)"); r.find("div.StreamView").remove() } else { var r = $("div.LeftColumn div.MiniNavDivs:eq(1)"); r.find("div.StreamView").remove() } var l = 0; var s = '<div class="StreamView">'; for (var p = 0; p < c.length; p++) { var o = g[p][1]; var i = g[p][0]; var h = g[p][2]; var n = g[p][3]; var m = g[p][4]; if (n == "true") { n = 1 } if (l == 12) { s += ('</div><div class="StreamView">'); l = 0 } s += '<div onclick="streamAjax(' + i + ');chooseClickType(this);return false" class="StreamHolder">' + stream_icons_html + '<div class="StreamImages"><img src="' + h + '" alt="' + o + '"/></div><span>' + o + '</span><div class="StreamMeta"><span class="MetaKey">' + i + '</span><span class="MetaWeight">10</span><span class="MetaPrivate">' + n + '</span><span class="MetaRequest">' + m + "</span></div></div>"; l++; if (p == (c.length - 1)) { s += "</div>"; r.find("div.PagerNav").before(s) } } } else { var r = $("div.LeftColumn div.MiniNavDivs:eq(1)"); r.find("div.StreamView").remove(); r.find("div.SearchPanel").after('<div class="StreamView"></div>'); r.find(".StreamView").append(error_pre + "Sorry no results were found for those search terms" + error_app) } initPrivacy("LeftColumn"); initPrivacy("RightColumn"); initPager("LeftColumn"); streamBrowseView() }) } var error_pre = '<div class="ErrorDiv"><div class="ErrorTop"></div><div class="ErrorMiddle"><p>'; var error_app = '</p></div><div class="ErrorBottom"></div></div>'; function ajaxSortBy(a) { $(a).parent().find(".Active").removeClass("Active").addClass("Inactive"); $(a).addClass("Active").removeClass("Inactive"); listAjax("Sorting") } var current_category; function listAjax(e) { if (e == "Sorting") { e = $("#BrowseNav .NavHolder:last a:first").attr("id") } var a; var b = $("#SortBy a").index($("#SortBy .Active")); if (b == 0) { a = "p" } if (b == 1) { a = "r" } if (b == 2) { a = "a" } current_category = e; var c = new Array; var d = new Date().getTime(); $.get(ajax_path_get + "?command=channels&categoryid=" + e + "&startpageno=1&endpageno=100&sortby=" + a + "&" + d, function(j) { var i = j; if (j.length != 0 && j.indexOf("Error: The server was unable to process the request due to an internal error.") == -1) { c = i.split("||"); var f = new Array; for (var p = 0; p < c.length; p++) { f[p] = c[p].split(",,") } if ($("div.MiniNavigation .Active a").html() == "Browse" || e == -1) { var q = $("div.LeftColumn div.MiniNavDivs:eq(0)"); q.find("div.StreamView").remove() } else { var q = $("div.LeftColumn div.MiniNavDivs:eq(1)"); q.find("div.StreamView").remove() } var k = 0; var r = '<div class="StreamView">'; for (var o = 1; o < c.length; o++) { var n = f[o][1]; var h = f[o][0]; var g = f[o][2]; var m = f[o][3]; var l = ""; if (f[o][4]) { if (f[o][4] == "1") { l = f[o][4] } } if (m == "true") { m = 1 } if (k == 12) { r += ('</div><div class="StreamView">'); k = 0 } r += '<div onclick="streamAjax(' + h + ');chooseClickType(this);return false" class="StreamHolder">' + stream_icons_html + '<div class="StreamImages"><img src="' + g + '" alt="' + n + '"/></div><span>' + n + '</span><div class="StreamMeta"><span class="MetaKey">' + h + '</span><span class="MetaWeight">10</span><span class="MetaPrivate">' + m + '</span><span class="MetaRequest">' + l + "</span></div></div>"; k++; if (o == (c.length - 1)) { q.find("div.PagerNav").before(r) } } } else { if (j.length == 0) { var q = $("div.LeftColumn div.MiniNavDivs:eq(0)"); q.find("div.StreamView").remove(); q.find("div.SortBy").after('<div class="StreamView"></div>'); q.find(".StreamView").append(error_pre + "Sorry there are no streams currently in this category" + error_app) } else { var q = $("div.LeftColumn div.MiniNavDivs:eq(0)"); q.find("div.StreamView").remove(); q.find("div.SortBy").after('<div class="StreamView"></div>'); q.find(".StreamView").append(error_pre + "An error has occurred" + error_app) } } initPrivacy("LeftColumn"); initPrivacy("RightColumn"); initPager("LeftColumn"); streamBrowseView() }) } function streamAjax(c) { var a = new Array; var b = new Date().getTime(); $.get(ajax_path_get + "?command=channeldetails&channelid=" + c + "&" + b, function(k) { if ($("#LeftColumn .SelectedStream").length) { var f = k; a = f.split("||"); var d = new Array; for (var p = 0; p < a.length; p++) { d[p] = a[p].split(",,") } for (var l = 0; l < a.length; l++) { var g = d[0][0]; var n = d[0][1]; var e = d[0][2]; var i = d[0][3]; var j = d[0][4]; var o = d[0][5]; var m = $("#CentreColumn div.CentreMeta div.MetaDiv"); m.find("#MetaAbout").html(g); m.find("#MetaDateAdded").html(n); m.find("#MetaAddedBy").html(e); m.find("#MetaContent").html(i); m.find("#MetaFollowers").html(j); m.find("#MetaLink").attr("href", "ChannelDetails.aspx?a=v&channelID=" + c) } } }) } function browseAjax(c) { var a = new Array; var b = new Date().getTime(); $.get(ajax_path_get + "?command=categories&categoryid=" + c + "&" + b, function(h) { var g = h; a = g.split("||"); var k = new Array; for (var f = 0; f < a.length; f++) { k[f] = a[f].split(",,") } if (window.location.href.indexOf("Download.aspx") != -1) { var d = $("div.BrowseDrop:last") } else { var d = $("#DivPopUpStreamProperties:first div.BrowseDrop:last") } d.find("a").remove(); for (var e = 0; e < a.length; e++) { d.append('<a onclick="browseDropClick(this);listAjax(' + k[e][0] + ');return false" id="' + k[e][0] + '" href="#">' + k[e][1] + "</a>") } }) } var nav_speed = 400; var drop_speed = 300; function bindBrowseHover() { $(".BrowseDrop").stop(true, true).css("display", "none"); if ($(".BrowseDrop").length == 1 || $("#DivPopUpStreamProperties:first .BrowseDrop").length == 1) { browseAjax($(this).find(".BrowseMain").attr("id")) } $(".BrowseNav *:animated").stop(true, true); if ($(this).find(".BrowseDrop").is(":hidden") && $(this).find(".BrowseDrop a:first").html() != "undefined") { if ($(this).is(".ClosedNav")) { $(".BrowseNav div").stop(true, true); $(this).parent().find(".OpenNav:last").find(".BrowseMain").animate({ width: "0px", paddingLeft: "31px" }, nav_speed); $(this).parent().find(".OpenNav:last").removeClass("OpenNav").addClass("ClosedNav").animate({ width: "31px" }, nav_speed, function() { $(this).find("img").attr("src", "Images/Default/browse-nav-closed.png").css("width", "31px") }); $(this).find(".BrowseMain").animate({ width: "96px", paddingLeft: "15px" }, nav_speed); $(this).find("img").attr("src", "Images/Default/browse-nav-open.png").css("width", "111px"); $(this).removeClass("ClosedNav").addClass("OpenNav").animate({ width: "111px" }, nav_speed, function() { $(this).parent().find(".BrowseDrop").slideUp(drop_speed); $(this).find(".BrowseDrop").slideDown(drop_speed) }) } else { if ($(this).is(".OpenNav")) { $(this).parent().find(".BrowseDrop").slideUp(drop_speed); $(this).find(".BrowseDrop").slideDown(drop_speed) } } $(".OpenNav img").attr("src", "Images/Default/browse-nav-open.png"); $(".OpenNav img").css("width", "111px") } } function bindBrowseHoverOut() { $(this).find(".BrowseDrop").stop(true, true).slideUp(drop_speed) } var temp_var = 0; function browseDropClick(e) { $(".BrowseDrop").css("display", "none"); if ($(e).parent().parent().nextAll(".NavHolder").length >= 1) { temp_var = 1; $(e).parent().parent().parent().find(".NavHolder:last"); refreshBrowse(); $(e).parent().parent().nextAll(".NavHolder").css({ display: "none" }).remove() } if (window.location.href.indexOf("Download.aspx") != -1) { var b = $(".BrowseNav .NavHolder") } else { var b = $("#DivPopUpStreamProperties:first .BrowseNav .NavHolder") } if (b.length >= 3) { if ($(e).parent().parent().next(".NavHolder").length == 1) { var i = 0 } else { var i = 1 } } else { var i = 0 } var d = $(e).html(); var g = $(e).parent().parent().find(".BrowseMain span").html(); var h = $(e).attr("id"); var a = '<div class="NavHolder OpenNav NewCat"><a onclick="killNav(this)" class="BrowseMain" href="#" id="' + h + '"><img src="Images/Default/browse-nav-closed.png" alt="" /><span>' + d + '</span></a><div class="BrowseDrop"><div class="DropBottom"></div></div><div class="BrowseParent">' + g + "</div></div>"; $("#BrowseNav").append(a); browseAjax(h); var k = $("#BrowseNav .NewCat"); initBrowseHoverEffects(); k.css("width", "31px"); k.find(".BrowseMain").css({ width: "0px", paddingLeft: "31px" }); k.find("img").css({ width: "31px" }); k.find(".BrowseMain").animate({ width: "96px", paddingLeft: "15px" }, nav_speed); k.find("img").attr("src", "Images/Default/browse-nav-open.png").css("width", "111px"); k.removeClass("ClosedNav").addClass("OpenNav").animate({ width: "111px" }, nav_speed); if (i == 1) { if (window.location.href.indexOf("Download.aspx") != -1) { var c = $("#BrowseNav") } else { var c = $("#DivPopUpStreamProperties:first #BrowseNav") } if (c.find(".NavHolder").length == 7) { c.find(".NavHolder:eq(0)").remove() } c.find(".OpenNav:first").find(".BrowseMain").animate({ width: "0px", paddingLeft: "31px" }, nav_speed); c.find(".OpenNav:first").removeClass("OpenNav").addClass("ClosedNav").animate({ width: "31px" }, nav_speed, function() { $(this).find("img").attr("src", "Images/Default/browse-nav-closed.png").css("width", "31px") }) } initBrowseNav(); k.removeClass("NewCat"); if (window.location.href.indexOf("CreateWizard.aspx") != -1) { $("#BrowseTree").next("div").css("display", "block"); var j = ""; var f = 0; $("#BrowseNav .BrowseMain").each(function() { j = j + '<span id="' + $(this).attr("id") + '">&nbsp;' + $(this).find("span").html() + "&nbsp;</span>"; f++ }); $("#BrowseTree").html(j); $("#BrowseTree span:first").remove(); if ($("#BrowseTree span").length > 1) { } $("#BrowseTree span:not(#BrowseTree span:first)").prepend("&gt;"); $("#BrowseTree").prepend("<span>Your Stream will be in:</span>"); $("#BrowseTree").css("display", "block") } return false } var new_parent = "All Categories"; function refreshBrowse() { var b = $(".BrowseNav .NavHolder:eq(0) .BrowseParent").html(); var c = b; var a = '<div class="NavHolder NewCat OpenNav"><a class="BrowseMain" href="#"><img src="Images/Default/browse-nav-closed.png" alt="" /><span>' + c + '</span></a><div class="BrowseDrop"><div class="DropBottom"></div></div><div class="BrowseParent">' + new_parent + "</div></div>"; if (b.length > 1 && $(".BrowseNav .NavHolder").length < 7) { $(".BrowseNav").prepend(a); new_parent = ""; initBrowseHoverEffects(); $(".NewCat").removeClass("NewCat"); refreshBrowse() } else { } } function killNav(a) { if ($(a).parent().next("div.NavHolder").length > 0) { $(a).parent().nextAll(".NavHolder").remove(); listAjax($(a).attr("id")); if ($(a).parent().parent().find("div.NavHolder").length == 7) { $(a).parent().parent().find("div.NavHolder:first").remove() } } return false } function saveCategory() { var c = $("#BrowseTree span:last").attr("id"); var b = $("#ForJQStreamDropDown option:selected").attr("value"); var a = "setCategory,," + b + ",," + c; $.post(ajax_path_put, { command: a }, function(d) { }) } function testProgress() { var d = (parseInt($(".MainPanel").height()) / 2); var e = (parseInt($(".MainPanel").width()) / 2) - 11; var c = $("div.MainPanel"); c.append('<div class="ProgressInd" id="Progress"></div>'); c.append('<div id="ProgressBackHolder"></div>'); var b = c.find("div#ProgressBackHolder"); var a = c.find("div#Progress"); b.append('<img id="ProgressCoverTop" src="../Images/Default/panel-cover-top.png" />'); b.append('<img id="ProgressCover" src="../Images/Default/panel-cover-middle.png" />'); b.append('<img id="ProgressCoverBot" src="../Images/Default/panel-cover-bot.png" />'); b.append('<div class="ProgressInd"></div>'); b.fadeIn(400, function() { a.css({ display: "block", top: d + "px", left: e + "px" }); a.animate({ left: e + "px" }, 5000, function() { a.remove(); b.fadeOut(400, function() { $(this).remove() }) }) }) } var progress_var = 0; function initProgressBar(b) { var a = $("div#" + b); if (progress_var == 0) { $("div#" + b).css({ display: "block" }); $("div.CreateArrowLeft,div.CreateArrowRight").css("opacity", "0.2") } progress_var++ } function endProgressBar(a) { progress_var--; if (progress_var <= 0) { $("div#" + a).css({ display: "none" }); $("div.CreateArrowLeft,div.CreateArrowRight").css("opacity", "1"); progress_bar = 0 } } function initBrowseHoverEffects() { var a = $("#BrowseNav div.NavHolder"); a.unbind("mouseenter", bindBrowseHover); a.unbind("mouseleave", bindBrowseHoverOut); a.bind("mouseenter", bindBrowseHover); a.bind("mouseleave", bindBrowseHoverOut) } function isShowWeight() { if ($("span.WeightingLink a:eq(0)").is(".WeightingSpanSelected")) { var a = 1 } return a } function showWeighting() { $("div.StreamWeight:not(#CentreColumn .StreamWeight)").stop(true, true).fadeIn(200); $("span.WeightingLink a:eq(1)").removeClass("WeightingSpanSelected"); $("span.WeightingLink a:eq(0)").addClass("WeightingSpanSelected"); $("div.StreamWeight").each(function() { if ($(this).html() == 100) { $(this).css({ fontSize: "1em", paddingTop: "3px", height: "18px", paddingLeft: "2px", width: "20px" }) } else { if ($(this).html() < 10) { $(this).css({ fontSize: "1.4em", paddingTop: "1px", height: "20px", paddingLeft: "8px", width: "14px" }) } else { $(this).css({ fontSize: "1.4em", paddingTop: "1px", height: "20px", paddingLeft: "3px", width: "19px" }) } } }) } function hideWeighting() { $("div.StreamWeight").stop(true, true).fadeOut(200); $("span.WeightingLink a:eq(0)").removeClass("WeightingSpanSelected"); $("span.WeightingLink a:eq(1)").addClass("WeightingSpanSelected") } function setAlert() { $(this).closest("div.DivPopUp").find("span.IsChanged").html("1") } function alertDiscard() { $("div.DivPopUpAlert").slideUp(200, function() { $("div.DivPopUp:visible").css("zIndex", "10000"); if ($("#DivPopUpTimings").is(":visible")) { unBlackOut3($("#DivPopUpTimings div:eq(0)")) } else { if ($("#DivPopUpContentProperties").is(":visible")) { $("#DivPopUpContentProperties").slideUp(300); $("#CoverLayer").fadeOut(200) } else { if ($("#DivPopUpStreamProperties").is(":visible")) { $("#DivPopUpStreamProperties").slideUp(300); $("#CoverLayer").fadeOut(200) } else { unBlackOut2() } } } }) } function alertNoDiscard() { $("div.DivPopUpAlert").slideUp(200, function() { $("div.DivPopUp:visible").css("zIndex", "10000") }) } function alertDiscard2() { $("div.DivPopUpAlert2").slideUp(200, function() { $("div.DivPopUp:visible").css("zIndex", "10000") }) } function alertNoDiscard2() { $("div.DivPopUpAlert2").slideUp(200, function() { $("div.DivPopUp:visible").css("zIndex", "10000") }) } function dropDownShow() { var a = $(this).closest("div.RFormBox").next().next("div.PropertyHidden"); var c = $(this).html(); var b = $(this).parent().find("option").index(this); if (b != 0) { a.find("input:first").attr("value", c); a.slideDown(400, function() { a.find("input:first").focus() }) } else { a.slideUp(400) } } function textBoxSpecial() { var a = $(this).prev("span.TextBoxSpecialInfo").html(); if ($(this).val() == a) { $(this).removeAttr("value") } $(this).blur(function() { if ($(this).val().length < 1) { $(this).attr("value", a) } }) } function transferOptions(c, d, b) { var a; if ($("#" + d).is("select")) { a = $("#" + d) } else { a = $("#" + d).find("select") } if (b == 1) { a.find("option:gt(0)").remove() } else { a.find("option").remove() } if (b == 2) { $("#" + c).find("option:gt(0)").each(function() { a.append("<option>" + $(this).html() + "</option>") }) } else { $("#" + c).find("option").each(function() { a.append("<option>" + $(this).html() + "</option>") }) } if (a.is(".DropDownShow") == true) { $("select.DropDownShow option").unbind("click", dropDownShow); $("select.DropDownShow option").bind("click", dropDownShow) } } function addNewOption(a, b) { $("#" + a + " select").append("<option>" + b + "</option>") } function addOption(a, b) { $("#" + b + ":visible").append("<option>" + $("#" + a + ":visible").val() + "</option>"); $("select.DropDownShow option").unbind("click", dropDownShow); $("select.DropDownShow option").bind("click", dropDownShow) } function replaceOption(a, b) { $("#" + b + ":visible option:selected").html($("#" + a + ":visible").val()) } function helpActivate(a) { var b = ""; $(a).find("p").each(function() { b = b + $(this).html() + "<br/><br/>" }); if (b.length < 500) { $("#HelpPopUp").addClass("DivPopUpSmall") } else { $("#HelpPopUp").removeClass("DivPopUpSmall") } $("#HelpPopUp div.DivPopMiddle p").html(b); BlackOut("HelpPopUp") } function windowsFolder() { var b = "FolderOpen"; var d = $("div.WindowsView:visible"); var a = d.find("div.RFormBox input"); var c = d.find("div.WindowsTree .WindowsTreeContent"); $(this).parent().find("." + b).removeClass(b); $(this).addClass(b); $("#ContentFolderName").html("in " + $(this).html()); a.val(c.find("div.FolderOpen").html()); var f = $(this).parent().find(".WindowsFolder").index(this); var e = $(this).closest("div.WindowsView").find("div.WindowsHolder:eq(" + f + ")"); $(this).closest("div.WindowsView").find("div.WindowsHolder").css("display", "none"); e.css("display", "block") } function createWindows() { var b = $("div.WindowsView"); var a = b.find("div.WindowsTree .WindowsTreeContent"); var c = a.find("div.WindowsFolder"); c.unbind("click", windowsFolder); c.bind("click", windowsFolder); c.bind("dblclick", windowsRename) } function windowsRename() { var d = $("div.WindowsView"); var c = d.find("div.WindowsTree .WindowsTreeContent"); var f = c.find("div.WindowsFolder"); var b = c.find(".FolderOpen"); var a = f.index(b); var e = b.html(); f.eq(a).after('<input onkeyup="restrictFolderName(this)" onblur="windowsRename2(this)" value="' + e + '" type="text" />').css("display", "none"); c.find("input").focus() } function restrictFolderName(b) { if ($(b).val().length > 40) { $(b).attr("value", $(b).val().substring(0, 40)) } var a = window.event.keyCode; if (a == 13) { windowsRename2(b) } } function windowsRename2(g) { var f = $(g).val(); $(g).prev("div").html($(g).val()).css("display", "block"); var b = $(g).prev("div").attr("class").substring(10, $(g).prev("div").attr("class").indexOf(" ")); $(g).remove(); var e; var d = $(".PanelCenter:visible").attr("id"); $("#ContentFolderName").html("in " + $(g).val()); var a = $(".ManageScreenOpen").parent().parent().parent().attr("id"); if (location.href.indexOf("Download.aspx") == -1) { if (a == "Panel2") { e = "editAssetContentFolder" } else { if (a == "Panel3") { e = "editSlideFolder" } else { } } } else { e = "renamePC" } var c = e + ",," + b + ",," + f; $.post(ajax_path_put, { command: c }, function(h) { }) } function windowsClose(a) { $("a.ManageScreenOpen").removeClass(".ManageScreenOpen"); if (location.href.indexOf("Download.aspx") == -1) { reverseWindows() } else { dropDownAjax("DropDownPCs") } } function reverseWindows() { var d = $("#PropertiesTitle").html(); var c = $("#DivPopUpProperties:visible div.WindowsTreeContent div.WindowsFolder"); var f = c.length; var e = ""; for (var a = 0; a < f; a++) { e += '<option value="' + c.eq(a).attr("class").substring(10, c.eq(a).attr("class").indexOf(" ")) + '">' + c.eq(a).html() + "</option>" } if (d.indexOf("Content") > 0) { var b = $("#DropDownFolders") } else { var b = $("#ForJQSlideDropDown") } if (f > 0) { b.find("select").html(e); b.find("select").change(function() { dropDownStreamPopulate(this) }) } else { if (b.is("#DropDownFolders")) { createDropDownAjax(0) } else { createDropDownAjax(1) } } } function addWindowsFolder() { var a = 1; $("div.WindowsView:visible div.WindowsTree .WindowsTreeContent div.WindowsFolder").each(function() { if ($(this).html() == "New Folder " + a) { a++ } }); $("div.WindowsView:visible div.WindowsTree .WindowsTreeContent").append('<div class="WindowsFolder">New Folder ' + a + "</div>"); $("div.WindowsView:visible div.WindowsTree .WindowsTreeContent div.WindowsFolder:last").bind("click", windowsFolder); $("div.WindowsView:visible div.WindowsTree .WindowsTreeContent div.WindowsFolder:last").bind("dblclick", windowsRename); $("div.WindowsView:visible div.WindowsHolder:last").after('<div class="WindowsHolder"></div>'); $("div.WindowsView:visible div.WindowsTree .WindowsTreeContent div.WindowsFolder:last").bind("dropstart", function(b) { $(this).addClass("FolderActive") }).bind("drop", function(c) { var d = $(this).parent().find(".WindowsFolder").index(this); var b = $(this).closest("div.WindowsView").find("div.WindowsHolder:eq(" + d + ")"); b.append(c.dragTarget) }).bind("dropend", function(b) { $(this).removeClass("FolderActive") }) } function cloneFields(a) { $("#" + a).clone().insertAfter($("#" + a)) } function showFields(a) { $("." + a + " .RFormBox:hidden:first").slideDown(300); $("." + a + " .InBetweenRForms:hidden:first").slideDown(300) } function initDocumentView() { $("div.WindowsView div.WindowsFolder:eq(0)").addClass("FolderOpen"); $("div.WindowsView div.WindowsHolder:eq(0)").css("display", "block"); $("div.WindowsView .WindowsFile").click(function() { if ($(this).is(".WindowsSelectedFile")) { $(this).removeClass("WindowsSelectedFile") } else { $(this).addClass("WindowsSelectedFile") } $("div.WindowsFileDepo h2 a").html("Select all") }); $("div.WindowsView .WindowsFile").bind("dragstart", function(c) { var b = $(this), a = b.clone(true, true); b.css("opacity", "0.5").addClass("WindowsSelectedFile"); return a.appendTo(document.body).addClass("ghost") }).bind("drag", function(a) { $(a.dragProxy).css({ position: "absolute", left: a.offsetX, top: a.offsetY, zIndex: "1000000", opacity: "0.5" }) }).bind("dragend", function(a) { $(a.dragProxy).fadeOut("normal", function() { $(this).remove() }); $(this).removeClass("outline"); $(this).css("opacity", "1") }); $("div.WindowsView:visible .WindowsFolder").bind("dropstart", function(a) { $(this).addClass("FolderActive") }).bind("drop", function(b) { var e = $("div.WindowsView .WindowsSelectedFile:visible"); var l = $(this).attr("class").substring(9, $(this).attr("class").indexOf(" ")); var f = $(".FolderActive").attr("class").substring(10, $(this).attr("class").indexOf(" ")); var d = $(".FolderOpen").attr("class").substring(10, $(this).attr("class").indexOf(" ")); var m = ""; var i = $(this).parent().find(".WindowsFolder").index(this); var j = $(this).closest("div.WindowsView").find("div.WindowsHolder:eq(" + i + ")"); var k = j.find(".WindowsFile"); if (e.length > 0) { for (var c = 0; c < e.length; c++) { var g = 0; if (g != 1) { m += e.eq(c).attr("class").substring(9, e.eq(c).attr("class").indexOf(" ")) + "||" } } m = m.substring(0, (m.length - 2)) } var a; if (location.href.indexOf("Download.aspx") != -1) { a = "movePCStreams" } else { if ($("div.Panel a.ManageScreenOpen").closest(".Panel").is("#Panel3")) { a = "moveSlideContent" } else { a = "moveRawContent" } } var h = a + ",," + d + ",," + f + ",," + m; $.post(ajax_path_put, { command: h }, function(n) { }); j.append(e); $(".WindowsSelectedFile").removeClass("WindowsSelectedFile"); $(".NotDuplicate").removeClass(".NotDuplicate") }).bind("dropend", function(a) { $(this).removeClass("FolderActive") }) } function popScheduleInfo(clicked) { $(".Scheduling").removeClass("Scheduling"); $(clicked).addClass("Scheduling"); $("#DivPopUpTimings:first input").removeAttr("value"); $("#DivPopUpTimings:first div.RepeatedField div.RFormBox").css("display", "none"); $("#DivPopUpTimings:first div.RepeatedField div.InBetweenRForms").css("display", "none"); $("#DivPopUpTimings:first div.RepeatedField div.RFormBox:first").css("display", "block"); $("#DivPopUpTimings:first div.RepeatedField div.InBetweenRForms:first").css("display", "block"); var current_id = $(clicked).parent().find("div.StreamMeta span.MetaKey").html(); var timestamp = new Date().getTime(); $.get(ajax_path_get + "?command=getChannelSlideProperties&slideID=" + current_id + "&" + timestamp, function(data) { var data_array = eval("(" + data + ")"); $("#TimingsURL").attr("value", unMicEncode(data_array[0][0])); $("#TimingsDur").attr("value", data_array[0][1]); var weekdays = $("#DivPopUpTimings div.WeekDaysList input"); for (var day_of_week = 0; day_of_week < data_array[1].length; day_of_week++) { if (data_array[1][day_of_week] == "1") { weekdays.eq(day_of_week).attr("checked", "checked") } } for (var f = 2; f < (data_array.length); f++) { if (f != 2) { $("#DivPopUpTimings:first .RepeatedField .RFormBox:hidden:first").css("display", "block"); $("#DivPopUpTimings:first .RepeatedField .InBetweenRForms:hidden:first").css("display", "block") } var start_date = data_array[f][0]; var end_date = data_array[f][1]; var start_time = data_array[f][2]; var end_time = data_array[f][3]; var property_inputs = $("#DivPopUpTimings:first div.RepeatedField div.RFormBox:visible:last .TextBox"); property_inputs.eq(0).val(start_date); property_inputs.eq(1).val(end_date); property_inputs.eq(2).val(start_time); property_inputs.eq(3).val(end_time) } }) } function sendScheduleInfo(e) { var a = $("div.Scheduling").parent().find("div.StreamMeta span.MetaKey").html(); var c = ",," + micEncode($("#TimingsURL").val()); var g = ",," + $("#TimingsDur").val(); var b = ""; $("#DivPopUpTimings div.WeekDaysList:first input").each(function() { if ($(this).is(":checked")) { b += "1" } else { b += "0" } }); var f = ""; $("#DivPopUpTimings:first .RepeatedField .RFormBox:visible").each(function() { var h = ""; for (var i = 0; i < 4; i++) { if ($(this).find("input.TextBox:eq(" + i + ")").val().length == 0) { h = h + "0" } else { h = h + "1" } } if (h.indexOf("1") != -1) { f += ",," + $(this).find("input.TextBox:eq(0)").val() + "||" + $(this).find("input.TextBox:eq(1)").val() + "||" + $(this).find("input.TextBox:eq(2)").val() + "||" + $(this).find("input.TextBox:eq(3)").val() } }); var d = "editChannelSlideProperties,," + a + c + g + ",," + b + f; $.post(ajax_path_put, { command: d }, function(h) { if (h == -1) { $("#DivPopUpTimings:first .OxiValidation").html("Display duration is not valid.").slideDown(200) } else { if (h == -2) { $("#DivPopUpTimings:first .OxiValidation").html("Invalid date/time.").slideDown(200) } else { if (h == -3) { $("#DivPopUpTimings:first .OxiValidation").html("Display duration is out of bounds.").slideDown(200) } else { unBlackOut3($(e)) } } } }) } function multiSchedule() { var b = "addChannelContents,," + $("#ForJQStreamDropDown option:selected").val() + ",," + $("#MultiSchedURL").val() + ",," + $("#MultiSchedDur").val() + ",," + $("#MultiSchedSD2 input").val() + ",," + $("#MultiSchedED2 input").val() + ",," + $("#MultiSchedST").val() + ",," + $("#MultiSchedET").val() + ",,"; var a = ""; $("#MultiSchedDays input").each(function() { if ($(this).is(":checked")) { a = a + "1" } else { a = a + "0" } }); b = b + a + ",,"; $("#Panel3 .SelectedStream").each(function() { b = b + $(this).find(".MetaKey").html() + "||" }); b = b.substring(0, (b.length - 2)); $.post(ajax_path_put, { command: b }, function(c) { checkCentreColumn2() }) } function manageScreenTransfer(clicked) { $(".ManageScreenOpen").removeClass("ManageScreenOpen"); $(clicked).addClass("ManageScreenOpen"); var folder_names = $(clicked).parent().parent().find(".PanelDropDown option"); var folder_length = $(clicked).parent().parent().find(".PanelDropDown option").length; var windows_folders = new Array(); var windows_id = new Array(); var windows_tree = $("#DivPopUpProperties .WindowsTree .WindowsTreeContent"); var windows_depo = $("#DivPopUpProperties .WindowsFileDepo"); windows_tree.find(".WindowsFolder").remove(); windows_depo.find(".WindowsHolder").remove(); var check_panel = $(clicked).parent().parent().parent(); if (check_panel.is(".Panel")) { if (check_panel.is(".Panel2")) { $("#PropertiesTitle").html("Manage your Content Folders"); $("#PropertiesFolders").html("My Content Folders"); $("#PropertiesContent").html('<a href="#" onclick="windowsSelectAll();return false;">Select all</a>My Content <span id="ContentFolderName">in ' + folder_names.eq(0).html() + "</span>"); var command_type = "rawContent"; var command_type2 = "rawContentAll" } else { if (check_panel.is(".Panel3")) { $("#PropertiesTitle").html("Manage your Slide Folders"); $("#PropertiesFolders").html("My Slide Folders"); $("#PropertiesContent").html('<a href="#" onclick="windowsSelectAll();return false;">Select all</a>My Slides'); var command_type = "streamSlides"; var command_type2 = "slideContentAll" } } var folder_type = "folder" } else { var command_type = "pcStreams"; var folder_type = "pc"; var command_type2 = "pcStreamsAll" } var pc_array = new Array(); var window_folder_html = ""; for (var f = 0; f < folder_length; f++) { windows_folders[f] = folder_names.eq(f).html(); windows_id[f] = folder_names.eq(f).val(); window_folder_html += '<div class="AjaxFolder' + windows_id[f] + ' WindowsFolder">' + windows_folders[f] + "</div>"; var pc_id = folder_names.eq(f).val(); pc_array[f] = folder_names.eq(f).val(); if (folder_names.eq(f).data("phantom") == "1") { windows_tree.find(" div.WindowsFolder").addClass("PhantomPC") } } windows_tree.append(window_folder_html); var ajax_array = new Array(); var timestamp = new Date().getTime(); $.get(ajax_path_get + "?command=" + command_type2 + "&" + timestamp, function(data) { var data_array = eval("(" + data + ")"); var logout_success = 0; var folder_data = ""; for (var q = 0; q < data_array.length; q++) { folder_data += '<div class="WindowsHolder">'; for (var r = 0; r < data_array[q].length; r++) { var file_id = data_array[q][r][0]; var file_name = data_array[q][r][1]; var file_img = data_array[q][r][2]; file_name = file_name.replace("||", '"'); folder_data += '<div class="StreamKey' + file_id + ' WindowsFile"><img src="' + file_img + '" alt="' + file_name + '" title="' + file_name + '"/>' + file_name + "</div>" } folder_data += "</div>" } $("div.WindowsFileDepo").append(folder_data); initDocumentView(); createWindows(); $(".WindowsLoader").remove() }) } function windowsSelectAll() { var a = $("div.WindowsHolder:visible div.WindowsFile"); var b = $("div.WindowsFileDepo h2 a"); if (a.length != $("div.WindowsHolder:visible div.WindowsSelectedFile").length) { a.addClass("WindowsSelectedFile"); b.html("Deselect all") } else { a.removeClass("WindowsSelectedFile"); b.html("Select all") } } function popStreamProperties() { var a = $("#ForJQStreamDropDown option:selected").attr("value"); var b = new Date().getTime(); $.get(ajax_path_get + "?command=getStream&streamID=" + a + "&" + b, function(h) { var d = new Array(); d = h.split(",,"); var i = d[0]; var g = d[1]; var l = d[2]; var m = d[3]; var c = d[4]; var e = d[5]; var n = d[6].split("|"); var j = n.length; var o = d[7]; var r = d[8]; var k = d[9]; var q = d[10]; $("#PrivateHiddenVar").html(q); var p = $("#DivPopUpStreamProperties input"); var f = $("#DivPopUpStreamProperties textarea"); p.removeAttr("value"); f.removeAttr("value").empty(); p.eq(0).val(m); f.eq(0).val(c); f.eq(1).val(e); p.eq(1).val(n[0]); p.eq(2).val(n[1]); p.eq(3).val(n[2]); p.eq(4).val(n[3]); p.eq(5).val(n[4]); p.eq(6).val(n[5]); p.eq(9).val(r); p.eq(10).val(r); if (o == ",True" || o == "True") { p.eq(8).attr("checked", "checked"); $(".PrivateHidden").css("display", "block"); $(".PrivateHiddenExtra").css("display", "none") } else { p.eq(7).attr("checked", "checked"); $(".PrivateHidden").css("display", "none"); $(".PrivateHiddenExtra").css("display", "none") } if (k == "False") { p.eq(15).attr("checked", "checked") } else { p.eq(14).attr("checked", "checked") } $("#DivPopUpStreamProperties input:last").val(l); if (g.length < 1) { $("#BrowseTree").css("display", "none"); $("#BrowseNav").css("display", "block") } else { $("#BrowseTree").css("display", "block").html('<span id="' + i + '">Your stream is currently in ' + g + '. - <a href="#" onclick="changeCategory();return false;">Change</a></span>'); $("#BrowseNav").css("display", "none") } }); $("#StreamPropertiesButton a:eq(0)").css("display", "block"); $("#StreamPropertiesButton a:eq(1)").css("display", "none") } function changeCategory() { $("#BrowseTree").slideUp(300); $("#BrowseNav").slideDown(300); $("#BrowseNav .BrowseMain:eq(0)").click() } function popnewStreamProperties() { $(".PrivateHiddenExtra").css("display", "none"); $("#DivPopUpStreamProperties input").removeAttr("value"); $("#DivPopUpStreamProperties textarea").removeAttr("value").empty(); $("#StreamPropertiesButton a:eq(0)").css("display", "none"); $("#StreamPropertiesButton a:eq(1)").css("display", "block"); $("#DivPopUpStreamProperties #HiddenEnterString input").attr("value", "newStreamProperties"); $("#BrowseTree").css("display", "none"); $("#BrowseNav").css("display", "block"); $("#BrowseNav .BrowseMain:eq(0)").click() } function sendStreamProperties() { var d = $("#BrowseNav a.BrowseMain:last").attr("id"); var f = $("#DivPopUpStreamProperties input:last").val(); var n = $("#DivPopUpStreamProperties input"); var c = $("#DivPopUpStreamProperties textarea"); var g = n.eq(0).val(); var a = c.eq(0).val(); var b = c.eq(1).val(); var h = n.eq(1).val() + "|" + n.eq(2).val() + "|" + n.eq(3).val() + "|" + n.eq(4).val() + "|" + n.eq(5).val() + "|" + n.eq(6).val(); if (n.eq(8).attr("checked") == true) { var l = "True" } else { var l = "False" } var o = n.eq(9).val(); var k = n.eq(10).val(); if (n.eq(15).attr("checked") == true) { var e = "False" } else { var e = "True" } if (d == null) { d = -1 } var j = $("div.PrivateHidden div.PrivateHiddenExtra table.RbVerticalList input").index($("div.PrivateHidden div.PrivateHiddenExtra table.RbVerticalList input:checked")); var m = "putStream,," + d + ",," + f + ",," + g + ",," + a + ",," + b + ",," + h + ",," + l + ",," + o + ",," + e + ",," + j; if (o == k) { if ($(".PrivateHiddenExtra").is(":hidden")) { var i = 1 } else { if (j == -1) { $("#DivPopUpStreamProperties .OxiValidation").html("Please select a locking action").slideDown(300); return false } } $.post(ajax_path_put, { command: m }, function(p) { if (p == -1) { $("#DivPopUpStreamProperties .OxiValidation").html("You must enter a stream name").slideDown(300) } else { if (p == -2) { $("#DivPopUpStreamProperties .OxiValidation").html("You must enter a password").slideDown(300) } else { unBlackOut2v2(); $("#ForJQStreamDropDown select option:selected").html(g) } } }) } else { $("#DivPopUpStreamProperties .OxiValidation").html("Passwords do not match").slideDown(300) } } function checkPrivateHidden() { var a = $("#PrivateHiddenVar").html(); $(".PrivateHiddenExtra").css("display", "block"); if (a == "True") { $("div.PrivateHiddenExtra table tr:last").css("display", "block") } else { $("div.PrivateHiddenExtra table tr:last").css("display", "none") } } function checkPrivateHidden2() { $("div.PrivateHiddenExtra table tr:last").css("display", "none") } function newStreamProperties() { var d = $("#BrowseTree span:last").attr("id"); var k = $("#DivPopUpStreamProperties input"); var c = $("#DivPopUpStreamProperties textarea"); var f = k.eq(0).val(); var a = c.eq(0).val(); var b = c.eq(1).val(); var g = k.eq(1).val() + "|" + k.eq(2).val() + "|" + k.eq(3).val() + "|" + k.eq(4).val() + "|" + k.eq(5).val() + "|" + k.eq(6).val(); if (k.eq(8).attr("checked") == true) { var i = "True" } else { var i = "False" } var l = k.eq(9).val(); var h = k.eq(10).val(); if (k.eq(15).attr("checked") == true) { var e = "False" } else { var e = "True" } if (d == null) { d = -1 } var j = "addStream,," + d + ",," + f + ",," + a + ",," + b + ",," + g + ",," + i + ",," + l + ",," + e; if (l == h) { $.post(ajax_path_put, { command: j }, function(m) { unBlackOut2v2(); createDropDownAjax(2); $("#DivPopUpStreamProperties #HiddenEnterString input").attr("value", "sendStreamProperties") }) } else { $("#DivPopUpStreamProperties .OxiValidation").html("Passwords do not match").slideDown(300) } } function popUpRemoveStream() { $("div.DivPopUpDeleteAlert").css({ display: "block", zIndex: 99999 }); $("#DivPopUpStreamProperties").css({ zIndex: 100 }) } function unPopUpRemoveStream() { $("div.DivPopUpDeleteAlert").css({ display: "none" }); $("#DivPopUpStreamProperties").css({ zIndex: 99999 }) } function removeStreamAjax() { var b = $("#DivPopUpStreamProperties input:last").val(); var a = "removeStream,," + b; $.post(ajax_path_put, { command: a }, function(c) { $("div.DivPopUpDeleteAlert").css({ display: "none" }); globalClosePopUp(); createDropDownAjax(2) }) } $(document).ready(function() { $(".OxiValidation").each(function() { if ($(this).text().length > 0) { $(this).css("display", "block") } }); $("select.WithFocusHighlight, textarea.WithFocusHighlight, input.WithFocusHighlight").focus(function() { $(this).closest(".FormBox, .FormBoxFullWidth").addClass("FormBoxHighlighted") }); $("select.WithFocusHighlight, textarea.WithFocusHighlight, input.WithFocusHighlight").blur(function() { $(this).closest(".FormBox, .FormBoxFullWidth").removeClass("FormBoxHighlighted") }); $("span.WithFocusHighlight > input").focus(function() { $(this).closest(".FormBox, .FormBoxFullWidth").addClass("FormBoxHighlighted") }); $("span.WithFocusHighlight > input").click(function() { $(this).focus() }); $("span.WithFocusHighlight > input").blur(function() { $(this).closest(".FormBox, .FormBoxFullWidth").removeClass("FormBoxHighlighted") }); $("table.WithFocusHighlight").find("input").focus(function() { $(this).closest(".FormBox, .FormBoxFullWidth").addClass("FormBoxHighlighted") }); $("table.WithFocusHighlight").find("input").click(function() { $(this).focus() }); $("table.WithFocusHighlight").find("input").blur(function() { $(this).closest(".FormBox, .FormBoxFullWidth").removeClass("FormBoxHighlighted") }); $(".WithFocusHighlight").closest(".FormBox").find(".ValidationInfo").each(function() { if ($(this).closest(".InnerFormBox").length == 1) { $(this).closest(".InnerFormBox").find("input").addClass("InputFieldHighlighted"); $(this).closest(".InnerFormBox").find("select").addClass("InputFieldHighlighted"); $(this).closest(".InnerFormBox").find("textarea").addClass("InputFieldHighlighted") } else { $(this).closest(".FormBox").find("input").addClass("InputFieldHighlighted"); $(this).closest(".FormBox").find("select").addClass("InputFieldHighlighted"); $(this).closest(".FormBox").find("textarea").addClass("InputFieldHighlighted") } }); $("#divStreamPreview").hover(function() { $(".StreamPreviewClose").stop(true, true).slideDown(300) }, function() { $(".StreamPreviewClose").slideUp(300) }); $("select.DropDownYear").each(function() { var e = new Date().getFullYear(); for (var f = 0; f < 150; f++) { curr_year = e - f; $(this).append("<option>" + curr_year + "</option>") } }); $(".WindowsFileDepo").disableSelection(); $(".PublicPrivateShow input").click(function() { var f = $("#PrivateHiddenVar").html(); var g = $(".PublicPrivateShow input").index(this); var e = $(this).parent().parent().parent().parent().parent().parent().find("div.PrivateHidden"); if (g == 1) { if (f == "True") { $(".PrivateHiddenExtra").css("display", "block").find("table.RbVerticalList tr:last").css("display", "block") } else { $(".PrivateHiddenExtra").css("display", "block").find("table.RbVerticalList tr:last").css("display", "none") } e.slideDown(400) } else { e.slideUp(400) } }); $("div.PanelCenterContent").css("opacity", "0.2"); $(".RFormBox:not(.NoFocusEffect) *").focus(function() { $(".RSelectedFormBox").removeClass("RSelectedFormBox"); $(this).closest(".RFormBox").addClass("RSelectedFormBox"); $(this).addClass("RSelectedInput") }).blur(function() { $(this).closest(".RFormBox").removeClass("RSelectedFormBox"); $(this).removeClass("RSelectedInput") }).click(function() { $(".RSelectedFormBox").removeClass("RSelectedFormBox"); $(this).closest(".RFormBox").addClass("RSelectedFormBox"); $(this).addClass("RSelectedInput") }); $(".RFormBox *").bind("keypress", setAlert); $(".BrowseNav").mouseleave(function() { initBrowseNav() }); initBrowseHoverEffects(); $(".TextBoxSpecial").bind("focus", textBoxSpecial); $("#CreateNextButton").click(function() { var e = $(".SlidingPanelsInner").css("left"); if (e == "0px") { updateArrowNav(1) } if (e == "-515px") { updateArrowNav(2) } if ($("#CreateNextButton").html().indexOf("Finished") > -1) { window.location.href = "../CreateSuccess.aspx" } }); $(".FooterSlideInner img").hover(function() { $(this).css("z-index", "1000"); $(this).parent().css("z-index", "1000"); $(this).stop().animate({ top: "-15px", left: "-15px", height: "80px", width: "80px" }, 200) }, function() { $(this).css("z-index", "10"); $(this).parent().css("z-index", "0"); $(this).stop().animate({ top: "0px", left: "0px", height: "50px", width: "50px" }, 100) }); $(".DivPopUp:not(.DivPopUpLarge,.DivPopUpNoDrag)").bind("drag", function(e) { $(this).css({ left: e.offsetX, top: e.offsetY }) }); $(".DivPopUpAlert").bind("drag", function(e) { $(this).css({ left: e.offsetX, top: e.offsetY }) }); $("div.DivPopUpClose:not(div.DivPopUpLarge .DivPopUpClose,div.DivPopUp .DivPopUpClose2)").click(function() { if ($(this).closest("div.DivPopUp").is("#UploadPopUp")) { createDropDownAjax() } if ($(this).closest("div.DivPopUp").find("span.IsChanged").html() == "1") { divAlertPopUp() } else { unBlackOut2() } }); $("div.DivPopUpLarge .DivPopUpClose").click(function() { unUploaderBlackOut(this) }); $("div.DivPopUp .DivPopUpClose2").click(function() { if ($(this).closest("div.DivPopUp").find("span.IsChanged").html() == "1") { divAlertPopUp() } else { unBlackOut3(this) } }); var a; $("#ForJSSlideInner a").mousedown(function() { a = $("#ForJSSlideInner").css("left") }).click(function() { var e = $("#ForJSSlideInner").css("left"); if (e == a) { } else { return false } }); var d = $("#ForJSSlideInner div").eq(0).width(); var b = $("#ForJSSlideInner div").width(); var c = 950 - parseInt(d); $("#ForJSSlideInner").bind("drag", function(g) { var f = $("#ScrollMeasure").css("width"); if (parseInt(f) <= 930) { f = "930px" } var e = (parseInt(f) - 860) / 2; if (parseInt($(this).css("left")) <= -(b + b)) { } else { if (parseInt($(this).css("left")) >= 0) { } else { $(this).css({ left: g.offsetX - e }) } } }); $(function() { $(".drag").bind("dragstart", function(g) { var f = $(this), e = f.clone(); f.addClass("outline"); f.css("opacity", "0.5"); return e.appendTo(document.body).addClass("ghost") }).bind("drag", function(e) { $(e.dragProxy).css({ position: "absolute", zIndex: "1000", left: e.offsetX, top: e.offsetY, opacity: "0.5" }) }).bind("dragend", function(e) { $(e.dragProxy).fadeOut("normal", function() { $(this).remove() }); $(this).removeClass("outline"); $(this).css("opacity", "1") }); $(".drop").bind("dropstart", function(e) { $(this).addClass("active") }).bind("drop", function(e) { $(this).append(e.dragTarget) }).bind("dropend", function(e) { $(this).removeClass("active") }); $(".drop2").bind("dropstart", function(e) { $(this).addClass("active") }).bind("drop", function(e) { $(this).append(e.dragTarget) }).bind("dropend", function(e) { $(this).removeClass("active") }) }) }); function launchLogin() { $("document").ready(function() { }) } function createRedirect() { if ($("#HeaderLoggedIn").is(":hidden")) { BlackOut2("DivLoginBox"); $("#ProgressLogin").addClass("SendMeToCreate") } else { window.location.href = "/CreateWizard.aspx" } } function unCreateRedirect() { $(".SendMeToCreate").removeClass("SendMeToCreate") } var channelslide_timer; var slide_curr = 0; function initchannelSlideShow() { $("div.ChannelSlideShow div.ChannelSlide:eq(0)").css("display", "block"); if ($("div.ChannelSlideShow div.ChannelSlide").length > 1) { channelslide_timer = setTimeout("channelSlideShow()", 5000); $(".DetailControls").css("display", "block") } } function pauseChannelSlideShow() { $(".DetailPause").css("display", "none"); $(".DetailPlay").css("display", "block"); clearTimeout(channelslide_timer) } function playChannelSlideShow() { $(".DetailPause").css("display", "block"); $(".DetailPlay").css("display", "none"); channelslide_timer = setTimeout("channelSlideShow()", 5000) } function nextChannelSlideShow() { clearTimeout(channelslide_timer); $(".DetailPrev,.DetailNext").css("display", "none"); $(".DetailPrev2,.DetailNext2").css("display", "block"); var a = $("div.ChannelSlideShow div.ChannelSlide").length; if (slide_curr == a - 1) { $("div.ChannelSlideShow div.ChannelSlide:eq(" + slide_curr + ")").animate({ left: "-861px" }, 500, function() { $(this).css("display", "none"); $(".DetailPrev,.DetailNext").css("display", "block"); $(".DetailPrev2,.DetailNext2").css("display", "none") }); $("div.ChannelSlideShow div.ChannelSlide:eq(0)").css({ display: "block", left: "861px" }).animate({ left: "0px" }, 500); slide_curr = 0 } else { $("div.ChannelSlideShow div.ChannelSlide:eq(" + slide_curr + ")").animate({ left: "-861px" }, 500, function() { $(this).css("display", "none"); $(".DetailPrev,.DetailNext").css("display", "block"); $(".DetailPrev2,.DetailNext2").css("display", "none") }); $("div.ChannelSlideShow div.ChannelSlide:eq(" + (slide_curr + 1) + ")").css({ display: "block", left: "861px" }).animate({ left: "0px" }, 500); slide_curr++ } if ($(".DetailPlay").is(":hidden")) { channelslide_timer = setTimeout("channelSlideShow()", 5000) } } function prevChannelSlideShow() { clearTimeout(channelslide_timer); $(".DetailPrev,.DetailNext").css("display", "none"); $(".DetailPrev2,.DetailNext2").css("display", "block"); var a = $("div.ChannelSlideShow div.ChannelSlide").length; if (slide_curr == 0) { $("div.ChannelSlideShow div.ChannelSlide:eq(" + slide_curr + ")").animate({ left: "861px" }, 500, function() { $(this).css("display", "none"); $(".DetailPrev,.DetailNext").css("display", "block"); $(".DetailPrev2,.DetailNext2").css("display", "none") }); $("div.ChannelSlideShow div.ChannelSlide:last").css({ display: "block", left: "-861px" }).animate({ left: "0px" }, 500); slide_curr = a - 1 } else { $("div.ChannelSlideShow div.ChannelSlide:eq(" + slide_curr + ")").animate({ left: "861px" }, 500, function() { $(this).css("display", "none"); $(".DetailPrev,.DetailNext").css("display", "block"); $(".DetailPrev2,.DetailNext2").css("display", "none") }); $("div.ChannelSlideShow div.ChannelSlide:eq(" + (slide_curr - 1) + ")").css({ display: "block", left: "-861px" }).animate({ left: "0px" }, 500); slide_curr-- } if ($(".DetailPlay").is(":hidden")) { channelslide_timer = setTimeout("channelSlideShow()", 5000) } } function channelSlideShow() { var a = $("div.ChannelSlideShow div.ChannelSlide").length; if (slide_curr == a - 1) { $("div.ChannelSlideShow div.ChannelSlide:eq(" + slide_curr + ")").animate({ left: "-861px" }, 500, function() { $(this).css("display", "none") }); $("div.ChannelSlideShow div.ChannelSlide:eq(0)").css({ display: "block", left: "861px" }).animate({ left: "0px" }, 500); slide_curr = 0 } else { $("div.ChannelSlideShow div.ChannelSlide:eq(" + slide_curr + ")").animate({ left: "-861px" }, 500, function() { $(this).css("display", "none") }); $("div.ChannelSlideShow div.ChannelSlide:eq(" + (slide_curr + 1) + ")").css({ display: "block", left: "861px" }).animate({ left: "0px" }, 500); slide_curr++ } channelslide_timer = setTimeout("channelSlideShow()", 5000) } function checkDuration(a) { if (isNaN($(a).val()) == true) { $(a).attr("value", $(a).val().substring(0, ($(a).val().length - 1))); checkDuration(a) } } function clearField(b, a) { if (a == b.value) { b.value = "" } } function fillField(b, a) { if (b.value == "") { b.value = a } } function initArrays() { select_objects = document.getElementsByTagName("select"); all_selects = new Array(); options_selected = new Array(); for (var c = 0; c < select_objects.length; c++) { var b = select_objects[c].id; all_selects[b] = new Array(); options_selected[b] = new Array(); for (var a = 0; a < select_objects[c].length; a++) { all_selects[b][a] = new Array(); all_selects[b][a]["value"] = select_objects[c].options[a].value; all_selects[b][a]["text"] = select_objects[c].options[a].text } } } function filterFunction(f, a) { var b = document.getElementById(f); var d = b.getElementsByTagName("select")[0]; if (d) { var c = d.id } else { return } if (options_selected[c].length == 0) { selectFunction(document.getElementById(c)) } d.options.length = 0; var e = 0; for (var g = 0; g < all_selects[c].length; g++) { var m = all_selects[c][g]["text"]; var l = m.toLowerCase(); var j = all_selects[c][g]["value"]; var h = (typeof a == "object") ? a.value.toLowerCase() : ""; if (l.indexOf(h) >= 0) { d.options[e++] = new Option(m, j, false, (typeof options_selected[c][j] != "undefined")) } } } function selectFunction(c) { var a = c.options.length; for (var b = 0; b < a; b++) { if (c.options[b].selected == true) { options_selected[c.id][c.options[b].value] = true } else { if (typeof options_selected[c.id][c.options[b].value] != "undefined") { delete options_selected[c.id][c.options[b].value] } } } } function adminAddStreams(b, a) { $("#" + b).find("select option:selected").each(function() { $("#" + a).find("select").append('<option value="' + $(this).val() + '">' + $(this).html() + "</option>") }) } function adminRemoveStreams(a) { $("#" + a).find("select option:selected").each(function() { $(this).remove() }) } function adminPopStreamHidden(c, b) { var d = ""; $("#" + b + " select option").each(function() { d = d + $(this).val() + ",," }); var a = d.substr(0, (d.length - 2)); $("#" + c).val(a) } function initAdminSchedule() { var d = $("#ForJSSchedStarts"); var a = $("#ForJSSchedEnds"); var c = d.find(".AdminLeft"); var b = a.find(".AdminRight"); c.eq(0).css({ display: "block", border: "none" }); b.eq(0).css({ display: "block", border: "none" }); c.find(".EditBoxW1").each(function() { if ($(this).val().length > 0 && $(this).closest(".AdminLeft").length > 0) { var e = c.index($(this).closest(".AdminLeft")); $(this).closest(".AdminLeft").css("display", "block").prevAll(".AdminLeft").css("display", "block"); b.eq(e).css("display", "block").prevAll(".AdminRight").css("display", "block") } }); b.find(".EditBoxW1").each(function() { if ($(this).val().length > 0 && $(this).closest(".AdminRight").length > 0) { var e = b.index($(this).closest(".AdminRight")); $(this).closest(".AdminRight").css("display", "block").prevAll(".AdminRight").css("display", "block"); c.eq(e).css("display", "block").prevAll(".AdminLeft").css("display", "block") } }) } function adminAddSchedule() { var d = $("#ForJSSchedStarts"); var a = $("#ForJSSchedEnds"); var c = d.find(".AdminLeft:hidden"); var b = a.find(".AdminRight:hidden"); c.eq(0).slideDown(200); b.eq(0).slideDown(200) } function adminCheckTemplate() { if ($("#ForJSDropDownCheck select").find("option").index($("#ForJSDropDownCheck").find("option:selected")) != 1) { $("#ForJSDropDownCheck2 select").attr("disabled", "disabled") } else { $("#ForJSDropDownCheck2 select").removeAttr("disabled") } } function adminCheckPasswordRequest() { if ($("#ForJSRequest input:eq(0)").is(":checked")) { $("#ForJSRequest1 input").attr("disabled", "disabled"); $("#ForJSRequest2 input").attr("disabled", "disabled") } else { $("#ForJSRequest1 input").removeAttr("disabled"); $("#ForJSRequest2 input").removeAttr("disabled") } } function addToLocalNav(a, b) { $(".LocalNav").append('<div class="Inactive"><a href="' + b + '.aspx">' + a + "</a></div>") } function removeFromLocalNav(d) { var c = d.split(","); var b = $(".LocalNav div"); for (var a = 0; a < c.length; a++) { b.eq(c[a]).remove() } } function check(a) { } function findGoButton(function_name, function_var, e) { var code; if (!e) { var e = window.event } if (e.keyCode) { code = e.keyCode } else { if (e.which) { code = e.which } } if (code == 13) { eval(function_name + "(" + function_var + ")") } } function findGoButton2(b) { var a = window.event.keyCode; if (a == 13) { $("#" + b).click() } } function multiFindGo() { var unicode = window.event.keyCode; if (unicode == 13) { var function_name = $("#HiddenEnterString input").val(); eval(function_name + "()") } } function checkDownloadAuto() { var a = $("#ForJSDownloadHidden input").val(); if (a.length > 0) { miniNavShow(1); $(".MiniNavDivs:eq(1) input").attr("value", a); searchAjax($(".MiniNavDivs:eq(1) a")) } } function globalClosePopUp() { if ($(".DivPopUpAlert,.DivPopUpAlert2,.DivPopUpDeleteAlert").is(":visible")) { } else { $("#DivLoginTerms").css("display", "none"); $(".DivPopUp:visible .DivPopUpClose").click(); $("#divStreamPreview .StreamPreviewClose a").click() } } function expandDefaultSettings() { var a = $("#DefaultSettingsInner"); if (a.is(":visible")) { a.slideUp(200); $("#DefaultSettingsExpandLink a").addClass("Dropped") } else { a.slideDown(200); $("#DefaultSettingsExpandLink a").removeClass("Dropped") } } $(document).ready(function() { }); function createArrowLeft() { if (whatpanel > 0) { updateArrowNav(whatpanel - 1) } } function createArrowRight() { if (whatpanel < 2) { updateArrowNav(whatpanel + 1) } } function schedAdvOptions() { var a = $("#SchedAdvOptions"); if (a.is(":hidden")) { a.stop(true, true).slideDown(200, function() { $("a.SchedAdvOptionLink").addClass("SchedAdvOptionLinkOpen") }) } else { a.slideUp(200); $("a.SchedAdvOptionLink").removeClass("SchedAdvOptionLinkOpen") } } function initFAQs() { $(".OxigenFAQ h2 a").click(function() { var b = $(this).parent().next("div"); var a = $(".OxigenFAQ div:not(.OxigenFAQ div div)"); if (b.is(":hidden")) { a.slideUp(300); $(".FAQOpen").removeClass("FAQOpen"); b.slideDown(300); $(this).addClass("FAQOpen") } else { b.slideUp(300); $(this).removeClass("FAQOpen") } return false }) } function showTerms() { $("#DivLoginBox").css({ zIndex: "9" }); $("#DivLoginTerms").css({ display: "block", zIndex: "99999" }) } function closeTerms() { $("#DivLoginBox").css({ zIndex: "99999" }); $("#DivLoginTerms").css({ display: "none" }) } function micEncode(b) { var a = b; if (b.indexOf(",,") > -1) { a = b.replace(",,", "{a001}") } return a } function unMicEncode(b) { var a = b; if (b.indexOf("{a001}") > -1) { a = b.replace("{a001}", ",,") } return a };